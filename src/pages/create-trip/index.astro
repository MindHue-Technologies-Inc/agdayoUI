---
import Layout from "../../layouts/LayoutWSidebar.astro"
import Main from "../../components/layout/Main.vue"
import Topbar from "../../components/UI/Topbar.vue"
import CreateTrip from "../../components/pages/create-trip/index.vue"
export const prerender = false;


// Get the user data that the middleware attached to `Astro.locals`
// This is now the definitive source for user information.
const user = Astro.locals.user;

// Pass the user's photo URL to the Topbar component
const userPhotoURL = user?.photoURL || null;
---

<Layout>
  <Main>
    <Topbar title="Create Trips" photoURL={userPhotoURL} client:load />
    <CreateTrip client:load/>
  </Main>
</Layout>