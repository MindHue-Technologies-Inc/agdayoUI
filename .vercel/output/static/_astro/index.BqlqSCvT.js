import{C as D}from"./Card.DAiZEWK-.js";import{A as h,I as V,D as k,a as A,u as S}from"./db.BB63aibL.js";import{I as _,a as z,T as P}from"./Toast.D5awJpa_.js";import{B as y}from"./Button.FTLgxezC.js";/* empty css                       */import{_ as w}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{f as T,w as i,r as a,o as p,b as n,d as s,g as v,c as x,F as N,j as E,t as L}from"./runtime-core.esm-bundler.CXnlPxLE.js";import{w as j}from"./runtime-dom.esm-bundler.hnKfWXw2.js";/* empty css                       *//* empty css                        */import"./index.BSdFiPHn.js";/* empty css                        */const F={components:{AdvInput:h,Input:_,Button:y},data(){return{totalBudget:null}},methods:{setBudget(){console.log("Total Budget:",this.totalBudget)},formatCurrency(o,t="en-US",l="PHP",u="symbol"){try{return new Intl.NumberFormat(t,{style:"currency",currency:l,currencyDisplay:u,minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}catch(e){return console.error("Error formatting currency:",e),String(o)}}}},U={class:"flex flex-col p-1 gap-4"};function $(o,t,l,u,e,r){const f=a("Input"),c=a("Button"),g=a("AdvInput");return p(),T(g,{id:"budget",label:"Budget",icon:"ph ph-wallet",summary:r.formatCurrency(e.totalBudget)},{default:i(()=>[n("div",U,[s(f,{id:"total-budget",placeholder:"Enter your estimated total budget",prefixIcon:"ph ph-currency-dollar",type:"number",formatCommas:!0,modelValue:e.totalBudget,"onUpdate:modelValue":t[0]||(t[0]=d=>e.totalBudget=d)},null,8,["modelValue"]),t[2]||(t[2]=n("span",{class:"text-sm text-zinc-400"},"This is your overall budget for the entire trip.",-1)),s(c,{class:"w-full"},{default:i(()=>t[1]||(t[1]=[v("Set Budget")])),_:1})])]),_:1},8,["summary"])}const K=w(F,[["render",$],["__scopeId","data-v-3f302c43"]]),H={components:{AdvInput:h,Input:_,Button:y},data(){return{newCompanionName:"",companions:[]}},methods:{addCompanion(){this.newCompanionName.trim()!==""&&(this.companions.push(this.newCompanionName.trim()),this.newCompanionName="")},removeCompanion(o){this.companions.splice(o,1)},saveCompanions(){console.log("Companions:",this.companions)}}},O={class:"flex flex-col p-1 gap-2"},Y={class:"flex gap-2"},J={key:0,class:"py-2 flex flex-col gap-1"},R={class:"font-medium flex items-center gap-2"},q=["onClick"],G={key:1,class:"py-2 flex flex-col gap-0"};function M(o,t,l,u,e,r){const f=a("Input"),c=a("Button"),g=a("AdvInput");return p(),T(g,{id:"companions",label:"Companions",icon:"ph ph-users",summary:""},{default:i(()=>[n("div",O,[n("div",Y,[s(f,{id:"add-companion",placeholder:"Search or Enter Companion Name",prefixIcon:"ph ph-user-plus",modelValue:e.newCompanionName,"onUpdate:modelValue":t[0]||(t[0]=d=>e.newCompanionName=d),onKeyup:j(r.addCompanion,["enter"]),class:"flex-grow"},null,8,["modelValue","onKeyup"]),s(c,{onClick:r.addCompanion,disabled:e.newCompanionName.trim()==="",customClass:"px-4 py-2 text-sm"},{default:i(()=>t[1]||(t[1]=[v(" Add ")])),_:1},8,["onClick","disabled"])]),t[7]||(t[7]=n("span",{class:"text-sm text-zinc-400"},"Add friends or family joining the trip.",-1)),e.companions.length>0?(p(),x("div",J,[t[4]||(t[4]=n("span",{class:"font-medium"},"Added Companions:",-1)),(p(!0),x(N,null,E(e.companions,(d,C)=>(p(),x("div",{key:C,class:"flex items-center justify-between p-4 rounded-xl transition-colors duration-200 hover:bg-zinc-100"},[n("span",R,[t[2]||(t[2]=n("i",{class:"ph ph-user text-zinc-500"},null,-1)),v(" "+L(d),1)]),n("button",{onClick:b=>r.removeCompanion(C),class:"text-red-500 hover:text-red-700 transition-colors duration-200"},t[3]||(t[3]=[n("i",{class:"ph ph-x-circle text-lg"},null,-1)]),8,q)]))),128))])):(p(),x("div",G,t[5]||(t[5]=[n("span",{class:"font-medium text-zinc-400"},"No companions added yet.",-1),n("span",{class:"text-[12px] font-medium text-zinc-400"},"Start by typing a name above.",-1)]))),s(c,{class:"w-full",onClick:r.saveCompanions},{default:i(()=>t[6]||(t[6]=[v("Confirm Companions")])),_:1},8,["onClick"])])]),_:1})}const Q=w(H,[["render",M],["__scopeId","data-v-8b027c81"]]),W={components:{Dates:A,Destination:k,Button:y,Card:D,Input:_,InputTitle:V,AdvInput:h,Budget:K,InviteCompanions:Q,ToastContainer:P,Toast:z},data(){return{useDb:S.get(),dangerToast:{message:""},warningToast:{message:""},name:"",date:{start:null,end:null},location:"",btnLoading:!1,unsubscribeFromDbStore:null}},methods:{validateName(){return this.name?!0:(this.warningToast.message="Please Enter the Trip Name",this.$refs.advInputName.expand(),!1)},validateLocation(){return this.location?!0:(this.warningToast.message="Please Enter a Location",this.$refs.destination.expand(),!1)},validateDate(){return!this.date.start&&!this.date.end?(this.warningToast.message="Please Enter a Date Range",this.$refs.dates.expand(),!1):!0},proceedNext(o){o==="destination"?(this.$refs.destination.collapse(),this.$refs.dates.expand()):o==="dates"&&this.$refs.dates.collapse()},async saveTrip(){if(this.validateName()&&this.validateLocation()&&this.validateDate())try{this.btnLoading=!0;const o={name:this.name,date:this.date,location:this.location},t=await fetch("/api/v1/trips",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok){const e=await t.json();throw console.error("Something went wrong",e.message),new Error(e.message)}const{tripId:l,tripData:u}=await t.json();console.log(l,u),window.location.href=`/trips/${l}`}catch(o){console.error(o)}}}},X={class:"flex flex-col grow place-content-center"},Z={class:"p-1"};function tt(o,t,l,u,e,r){const f=a("InputTitle"),c=a("AdvInput"),g=a("Destination"),d=a("Dates"),C=a("Button"),b=a("Card"),I=a("Toast"),B=a("ToastContainer");return p(),x(N,null,[n("div",X,[t[7]||(t[7]=n("h1",{class:"fadeIn text-4xl sm:text-5xl font-extrabold text-zinc-800 mb-8 sm:mb-12 text-center tracking-tight outfit"}," Plan Your Next Adventure ",-1)),s(b,{class:"fadeIn fadeIn-1",customClass:"rounded-4xl border-secondary-xs shadow-secondary-lg"},{default:i(()=>[s(c,{label:"Trip Name",icon:"ph-paper-plane-tilt",ref:"advInputName"},{default:i(()=>[n("div",Z,[s(f,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=m=>e.name=m),placeholder:"e.g., Island Hopping Palawan",id:"name",class:"w-full text-2xl font-bold text-zinc-800"},null,8,["modelValue"]),t[5]||(t[5]=n("span",{class:"text-sm text-zinc-500 mt-2 block"}," You can add preparations, activities, and routes after creating the trip. ",-1))])]),_:1},512),s(g,{ref:"destination",modelValue:e.location,"onUpdate:modelValue":t[1]||(t[1]=m=>e.location=m),onNext:t[2]||(t[2]=m=>r.proceedNext("destination"))},null,8,["modelValue"]),s(d,{ref:"dates",modelValue:e.date,"onUpdate:modelValue":t[3]||(t[3]=m=>e.date=m),onNext:t[4]||(t[4]=m=>r.proceedNext("dates"))},null,8,["modelValue"]),s(C,{loading:e.btnLoading,ref:"submit",onClick:r.saveTrip},{default:i(()=>t[6]||(t[6]=[v("Start Planning")])),_:1},8,["loading","onClick"])]),_:1})]),s(B,null,{default:i(()=>[s(I,{variant:"error",ref:"dangerToast",message:e.dangerToast.message},null,8,["message"]),s(I,{variant:"warning",ref:"warningToast",message:e.warningToast.message},null,8,["message"])]),_:1})],64)}const ct=w(W,[["render",tt]]);export{ct as default};
