import{C as b}from"./Card.B64G5Pkp.js";import{T as _}from"./Tag.CucyHJvL.js";import{_ as y}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as f,j as S,F as D,r as g,o as c,f as h,w as C,b as s,n as m,a as x,t as u,Z as F,d as w,g as $}from"./runtime-core.esm-bundler.Db96a2QS.js";import{B as U}from"./Button.BgwQzOqK.js";import{S as B}from"./Spinner.BnrRTTjl.js";import{A as I}from"./Anchor.fzLUPe0_.js";/* empty css                       *//* empty css                       *//* empty css                       */const z={components:{Card:b,Tag:_},props:{trips:{type:Array,required:!0}},methods:{progressOfPlanning(e){return[e.activityIds?.length>0,e.budgetIds?.length>0,e.companionsUids?.length>1,e.taskIds?.length>0,!!e.accommodationIds?.length>0].filter(Boolean).length},checkUpcoming(e,r){const a=new Date,o=new Date(e),l=new Date(r);if(l.setDate(l.getDate()+1),a<o)return"Upcoming";if(o<=a&&a<l)return"Active";if(l<a)return"Completed"},cardClass(e){switch(e){case"peach":return"border-primary-light-sm shadow-primary-light-md";case"blue":return"border-info-light-sm shadow-info-light-md";case"amber":return"border-warning-light-sm shadow-warning-light-md";case"emerald":return"border-success-light-sm shadow-success-light-md";default:return"border-primary-light-sm shadow-primary-light-md"}},headerClass(e){switch(e){case"peach":return"bg-peach-50";case"blue":return"bg-sky-50";case"amber":return"bg-amber-50";case"emerald":return"bg-emerald-50";default:return"bg-peach-50"}},progressClass(e){switch(e){case"peach":return"bg-peach-500";case"blue":return"bg-sky-500";case"amber":return"bg-amber-500";case"emerald":return"bg-emerald-500";default:return"bg-peach-500"}},progressBgClass(e){switch(e){case"peach":return"bg-peach-200";case"blue":return"bg-sky-200";case"amber":return"bg-amber-200";case"emerald":return"bg-emerald-200";default:return"bg-peach-200"}},textClass(e){switch(e){case"peach":return"text-peach-500";case"blue":return"text-sky-500";case"amber":return"text-amber-500";case"emerald":return"text-emerald-500";default:return"text-peach-500"}},formatDateRange(e,r){if(!e||!r)return"";const a=new Date(e),o=new Date(r);if(isNaN(a.getTime())||isNaN(o.getTime()))return console.warn(`Invalid date string(s) for range: Start "${e}", End "${r}"`),"";const l={month:"short",day:"numeric"},n={year:"numeric"},i=new Intl.DateTimeFormat("en-US",l).format(a),d=new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(o),t=new Intl.DateTimeFormat("en-US",n).format(o);if(e===r)return`${i}, ${t}`;if(a.getMonth()===o.getMonth()&&a.getFullYear()===o.getFullYear())return`${i.split(" ")[0]} ${new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(a)} - ${d}, ${t}`;const p=new Intl.DateTimeFormat("en-US",l).format(a),v=new Intl.DateTimeFormat("en-US",l).format(o);if(a.getFullYear()===o.getFullYear())return`${p} - ${v}, ${t}`;{const k=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(a),T=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(o);return`${k} - ${T}`}}}},N=["href"],j={class:"flex flex-row items-center justify-between",id:"status"},P={class:"font-extrabold text-2xl sm:text-3xl text-zinc-800 tracking-tight outfit leading-tight truncate"},A={class:"mt-2"},Y={class:"text-xs text-zinc-500 mt-1 block"},L={class:"text-sm text-zinc-500 mt-1 block"},O={class:"flex flex-row flex-wrap items-center gap-x-6 gap-y-2 text-zinc-600 font-medium text-sm mt-2"},M={class:"flex gap-1 items-center"},V={id:"date-range"},E={class:"flex gap-1 items-center"};function R(e,r,a,o,l,n){const i=g("Tag"),d=g("Card");return c(!0),f(D,null,S(a.trips,(t,p)=>(c(),h(d,{class:m(["fadeIn",`fadeIn-${p}`]),customClass:n.cardClass(t.theme)+"w-full p-0! overflow-hidden rounded-4xl hover:shadow-lg transition-shadow duration-200 cursor-pointer"},{default:C(()=>[s("a",{href:`/trips/${t.id}`,class:"block"},[s("div",{class:m(["flex flex-col gap-3 p-4 sm:p-6 md:p-8",n.headerClass(t.theme)])},[s("div",j,[n.checkUpcoming(t.date.start,t.date.end)==="Upcoming"?(c(),h(i,{key:0,label:"Upcoming",class:"bg-white border-primary-light-xs"})):x("",!0),n.checkUpcoming(t.date.start,t.date.end)==="Active"?(c(),h(i,{key:1,label:"Active",variant:"yellow"})):x("",!0),n.checkUpcoming(t.date.start,t.date.end)==="Completed"?(c(),h(i,{key:2,label:"Completed",variant:"green"})):x("",!0)]),s("div",null,[s("h3",P,u(t.name),1)]),s("div",A,[r[0]||(r[0]=s("span",{class:"text-zinc-600 font-semibold text-sm"},"Planning Progress:",-1)),s("div",{class:m([n.progressBgClass(t.theme),"w-full rounded-full h-2 mt-1"])},[s("div",{class:m(["h-2 rounded-full",n.progressClass(t.theme)]),style:F({width:`${n.progressOfPlanning(t)/t.planningProgress.total*100}%`})},null,6)],2),s("span",Y,[s("span",L,u(n.progressOfPlanning(t))+"/"+u(t.planningProgress?.total)+" Sections Complete",1)])]),s("div",O,[s("div",M,[s("i",{class:m([n.textClass(t.theme),"ph ph-calendar-dots text-base"])},null,2),s("span",V,u(n.formatDateRange(t.date.start,t.date.end)),1)]),s("div",E,[s("i",{class:m([n.textClass(t.theme),"ph ph-map-pin text-base"])},null,2),s("span",null,u(t.location),1)])])],2)],8,N)]),_:2},1032,["class","customClass"]))),256)}const q=y(z,[["render",R]]),Z={components:{Anchor:I,Spinner:B,Card:b,Tag:_,Button:U,TripCard:q},data(){return{trips:[],isLoading:!0}},computed:{sortedTrips(){return this.trips.toSorted((e,r)=>e.date.start.localeCompare(r.date.start))}},methods:{async fetchTrips(){try{const e=await fetch("/api/v1/trips");if(!e.ok){const r=await e.json();throw console.error("Something went wrong",r.message),new Error(`Something went wrong: ${r.message}`)}this.trips=await e.json()}catch(e){console.error(e)}finally{this.isLoading=!1}},redirect(e){window.location.href=e}},async mounted(){await this.fetchTrips()}},G={class:"fadeIn grow mt-8 md:mt-16"},H={class:"max-w-4xl"},J={class:"flex items-center justify-between mb-8"},K={class:"flex flex-col gap-6"},Q={key:1,class:"flex items-center justify-center w-full h-[32rem]"},W={key:2,class:"flex flex-col grow items-center justify-center gap-2 h-[32rem]"};function X(e,r,a,o,l,n){const i=g("Button"),d=g("TripCard"),t=g("Spinner");return c(),f("div",G,[s("div",H,[s("div",J,[r[2]||(r[2]=s("h1",{class:"font-extrabold text-4xl sm:text-5xl text-zinc-800 tracking-tight outfit leading-tight"}," My Trips ",-1)),w(i,{variant:"primary",onClick:r[0]||(r[0]=p=>n.redirect("/create-trip"))},{default:C(()=>r[1]||(r[1]=[s("i",{class:"ph ph-plus text-lg mr-1"},null,-1),$(" New Trip ")])),_:1})]),s("div",K,[l.trips.length>0?(c(),h(d,{key:0,trips:n.sortedTrips},null,8,["trips"])):l.isLoading?(c(),f("div",Q,[w(t,{label:"Loading your trips"})])):(c(),f("div",W,r[3]||(r[3]=[s("i",{class:"ph ph-island text-5xl text-zinc-400"},null,-1),s("span",{class:"font-medium text-zinc-400"},"No Trips",-1)])))])])])}const me=y(Z,[["render",X],["__scopeId","data-v-4bfcd935"]]);export{me as default};
