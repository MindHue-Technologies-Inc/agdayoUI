const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.CIGW-MKW.css","_astro/client.Db7OmKgL.js","_astro/index.esm.vxxS9n3R.js"])))=>i.map(i=>d[i]);
import{_ as B}from"./preload-helper.BlTxHScW.js";import{T as U}from"./Tag.CucyHJvL.js";import{_ as k}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as m,b as o,n as _,d as s,t as x,r as h,o as d,Z as ee,F as R,j as N,w as y,g as D,a as T,f as A,l as te,h as re,e as de,i as ce,a0 as ue,a5 as me}from"./runtime-core.esm-bundler.Db96a2QS.js";import{C as X}from"./Card.B64G5Pkp.js";import{B as I}from"./Button.BgwQzOqK.js";import{P as pe}from"./PaymentButton.DyXfvAlb.js";import{I as O,a as he,T as fe}from"./Toast.BZml51HT.js";import{T as le,C as oe}from"./CardActivity.BXjmSUGg.js";import{A as F,I as ve,a as ae,D as ge,u as be}from"./db.DN1TI3_9.js";import{T as J,b as G}from"./runtime-dom.esm-bundler.CNGa7J2q.js";import{C as ye}from"./Checkbox.CCbnstUT.js";import{S as z}from"./Select.Brwem7wU.js";import{F as we}from"./Friends.R9623hzZ.js";import{A as Se}from"./Anchor.fzLUPe0_.js";import{S as xe}from"./Spinner.BnrRTTjl.js";/* empty css                       *//* empty css                       *//* empty css                       *//* empty css                       */import"./index.BSdFiPHn.js";const Ce={components:{Tag:U},props:{iconName:{type:String,required:!0},iconColorVariant:{type:String,validator:t=>["peach","blue","green","red","gray","purple","yellow"].includes(t)},cardName:{type:String,required:!0},tagName:{type:String,required:!0},tagVariant:{type:String,default:"peach"}},computed:{baseClasses(){return"flex flex-col justify-between items-start bg-white rounded-4xl shadow-secondary-md border-secondary-xs min-h-40 min-w-40 overflow-hidden p-4 cursor-pointer transition-all duration-200 hover:shadow-lg hover:border-peach-400"},iconColorClass(){switch(this.iconColorVariant){case"peach":return"text-peach-500";case"blue":return"text-blue-500";case"green":return"text-green-500";case"red":return"text-red-500";case"gray":return"text-gray-500";case"purple":return"text-purple-500";case"yellow":return"text-yellow-500";default:return"text-zinc-900"}}},methods:{handleClick(){this.$emit("card-click",this.cardName)}}},_e={class:"flex-shrink-0"},Te={class:"flex flex-col items-start mt-auto"},De={class:"text-base font-semibold text-zinc-800"};function Ae(t,e,i,n,l,a){const r=h("Tag");return d(),m("div",{class:_([a.baseClasses]),onClick:e[0]||(e[0]=(...f)=>a.handleClick&&a.handleClick(...f))},[o("div",_e,[o("i",{class:_(["ph",i.iconName,"text-5xl",a.iconColorClass])},null,2)]),o("div",Te,[s(r,{label:i.tagName,variant:i.tagVariant,class:"mb-1"},null,8,["label","variant"]),o("span",De,x(i.cardName),1)])],2)}const ie=k(Ce,[["render",Ae],["__scopeId","data-v-f3de752e"]]),Ve={name:"TripDetailsHeader",components:{Card:X,Tag:U},props:{tripConfig:{type:Object,required:!0},planningProgress:{type:Object,required:!0},onlineCompanions:{type:Array,default:[]}},emits:["show-settings","showMap","copyToClipboard"],computed:{fadeIn(){return!!this.tripConfig.name},cardClass(){switch(this.tripConfig.theme){case"peach":return"border-primary-light-sm shadow-primary-light-md";case"blue":return"border-info-light-sm shadow-info-light-md";case"amber":return"border-warning-light-sm shadow-warning-light-md";case"emerald":return"border-success-light-sm shadow-success-light-md";default:return"border-primary-light-sm shadow-primary-light-md"}},headerClass(){switch(this.tripConfig.theme){case"peach":return"bg-peach-50";case"blue":return"bg-sky-50";case"amber":return"bg-amber-50";case"emerald":return"bg-emerald-50";default:return"bg-peach-50"}},progressClass(){switch(this.tripConfig.theme){case"peach":return"bg-peach-500";case"blue":return"bg-sky-500";case"amber":return"bg-amber-500";case"emerald":return"bg-emerald-500";default:return"bg-peach-500"}},progressBgClass(){switch(this.tripConfig.theme){case"peach":return"bg-peach-200";case"blue":return"bg-sky-200";case"amber":return"bg-amber-200";case"emerald":return"bg-emerald-200";default:return"bg-peach-200"}},textClass(){switch(this.tripConfig.theme){case"peach":return"text-peach-500";case"blue":return"text-sky-500";case"amber":return"text-amber-500";case"emerald":return"text-emerald-500";default:return"text-peach-500"}}},methods:{formatDateRange(t,e){if(!t||!e)return"";const i=t,n=e;if(isNaN(i.getTime())||isNaN(n.getTime()))return console.warn(`Invalid date string(s) for range: Start "${t}", End "${e}"`),"";const l={month:"short",day:"numeric"},a={year:"numeric"},r=new Intl.DateTimeFormat("en-US",l).format(i),f=new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(n),g=new Intl.DateTimeFormat("en-US",a).format(n);if(t===e)return`${r}, ${g}`;if(i.getMonth()===n.getMonth()&&i.getFullYear()===n.getFullYear())return`${r.split(" ")[0]} ${new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(i)} - ${f}, ${g}`;const p=new Intl.DateTimeFormat("en-US",l).format(i),v=new Intl.DateTimeFormat("en-US",l).format(n);if(i.getFullYear()===n.getFullYear())return`${p} - ${v}, ${g}`;{const u=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(i),c=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(n);return`${u} - ${c}`}},copyToClipboard(){this.$emit("copyToClipboard")}}},ke={class:"fadeIn flex flex-row items-center justify-between"},Re={class:"flex flex-row gap-2 items-center"},Ne={class:"fadeIn fadeIn-1"},Ie={class:"font-extrabold text-4xl sm:text-5xl text-zinc-800 tracking-tight outfit leading-tight"},Be={class:"fadeIn mt-2 fadeIn-2"},Ue={class:"text-sm text-zinc-500 mt-1 block"},Pe={class:"fadeIn fadeIn-3 flex flex-row items-center gap-6 text-zinc-600 font-medium mt-2"},Le={class:"flex gap-2 items-center"},Ee={class:"flex gap-2 items-center"},Oe={class:"flex flex-row gap-1"},Fe=["src","title"],ze=["title"];function Me(t,e,i,n,l,a){const r=h("Tag");return d(),m("div",{class:_(["flex flex-col gap-3 p-4 md:p-6 sm:p-8",a.headerClass])},[o("div",ke,[o("div",Re,[s(r,{label:"View on Map",onClick:e[0]||(e[0]=f=>t.$emit("showMap",!0)),variant:"green",mode:"button",icon:"ph-map-trifold"}),s(r,{onClick:a.copyToClipboard,label:"Share",variant:"peach",mode:"button",icon:"ph-share-fat"},null,8,["onClick"])]),o("button",{onClick:e[1]||(e[1]=f=>t.$emit("show-settings")),class:"flex justify-center items-center text-2xl text-zinc-600 cursor-pointer transition hover:text-peach-500 active:text-peach-600 focus:outline-none focus:ring-2 focus:ring-peach-300 rounded-full p-1 -mr-1"},e[2]||(e[2]=[o("i",{class:"ph ph-gear-six"},null,-1)]))]),o("div",Ne,[o("h2",Ie,x(i.tripConfig.name),1)]),o("div",Be,[e[3]||(e[3]=o("span",{class:"text-zinc-600 font-semibold"},"Planning Progress:",-1)),o("div",{class:_([a.progressBgClass,"w-full rounded-full h-2 mt-1"])},[o("div",{class:_(["h-2 rounded-full transition-all ease",a.progressClass]),style:ee({width:`${i.planningProgress.completed/i.planningProgress.total*100}%`})},null,6)],2),o("span",Ue,x(i.planningProgress.completed)+"/"+x(i.planningProgress.total)+" Sections Complete",1)]),o("div",Pe,[o("div",Le,[o("i",{class:_(["ph ph-calendar-dots text-xl",a.textClass])},null,2),o("span",null,x(a.formatDateRange(i.tripConfig.date.start,i.tripConfig.date.end)),1)]),o("div",Ee,[o("i",{class:_(["ph ph-map-pin text-xl",a.textClass])},null,2),o("span",null,x(i.tripConfig.location),1)])]),o("div",Oe,[(d(!0),m(R,null,N(i.onlineCompanions,(f,g)=>(d(),m("div",{key:f.uid},[f.photoURL?(d(),m("img",{key:0,src:f.photoURL,class:_(`h-8 w-8 rounded-full fadeIn fadeIn-${g}`),title:f.name,alt:""},null,10,Fe)):(d(),m("div",{key:1,title:f.name,class:_(["flex items-center justify-center ","text-xl rounded-full ","bg-none","bg-zinc-200 aspect-square border-2 border-zinc-300","overflow-hidden h-8 w-8",`fadeIn fadeIn-${g}`])},e[4]||(e[4]=[o("i",{class:"ph ph-user"},null,-1)]),10,ze))]))),128))])],2)}const je=k(Ve,[["render",Me]]),Ge={name:"TripSections",components:{AdvSquareCard:ie},props:{preparation:{type:Object,required:!0},accommodation:{type:Object,required:!0},budget:{type:Object,required:!0},companions:{type:Object,required:!0},transportation:{type:Object,required:!0},roles:{type:Object,required:!0}},emits:["show-preparation","show-accommodation","show-budget","show-companions","show-transportation","show-roles"],methods:{formatCurrency(t){return new Intl.NumberFormat(navigator.language,{style:"currency",currency:this.budget.currency,minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}}},Ke={class:"flex flex-row gap-4 py-4 sm:py-6 px-4 md:px-6 overflow-x-auto custom-scrollbar bg-zinc-50 border-t border-b border-zinc-100"};function He(t,e,i,n,l,a){const r=h("AdvSquareCard");return d(),m("div",Ke,[s(r,{iconName:"ph-users",cardName:"Companions",tagName:`${i.companions.length} Travelers`,tagVariant:"purple",onCardClick:e[0]||(e[0]=f=>t.$emit("show-companions"))},null,8,["tagName"]),s(r,{iconName:"ph-wallet",cardName:"Budget",tagName:`${a.formatCurrency(i.budget.totalBudget)} Budget`,tagVariant:"red",onCardClick:e[1]||(e[1]=f=>t.$emit("show-budget"))},null,8,["tagName"]),s(r,{iconName:"ph-suitcase",cardName:"Preparations",tagName:`${i.preparation.preparationsChecklist.length} Tasks`,tagVariant:"blue",onCardClick:e[2]||(e[2]=f=>t.$emit("show-preparation"))},null,8,["tagName"]),s(r,{iconName:"ph-bed",cardName:"Accommodations",tagName:`${i.accommodation?.numberOfRooms} ${i.accommodation?.numberOfRooms>1?"Rooms":"Room"}`,tagVariant:"orange",onCardClick:e[3]||(e[3]=f=>t.$emit("show-accommodation"))},null,8,["tagName"])])}const Ye=k(Ge,[["render",He]]),qe={name:"ActivityTimeline",components:{Button:I,Tag:U,CardActivity:oe,TimelineDot:le},props:{activities:{type:Array,default:()=>[]},tripConfig:{type:Object,required:!0}},emits:["show-add-activity","show-day-note","show-view-activity","edit-activity","delete-activity","add-new-activity","update-activity"],computed:{days(){const t=[];new Date(this.tripConfig.date.start);const e=new Date(this.tripConfig.date.end),i=navigator.language||"en-US";let n=new Date(this.tripConfig.date.start);for(;n<=e;){const l=n.getFullYear(),a=n.getMonth()+1<10?`0${n.getMonth()+1}`:`${n.getMonth()+1}`,r=n.getDate()<10?`0${n.getDate()}`:`${n.getDate()}`,f=`${l}-${a}-${r}`;new Intl.DateTimeFormat(i,{weekday:"short",month:"short",day:"numeric"}).format(n),t.push(f),n.setDate(n.getDate()+1)}return t},groupedActivities(){const t=[];let e=null,i=!1,n=!1,l=!1,a=!1,r=!1;return this.activities?.sort((f,g)=>{const p=new Date(f.datetime),v=new Date(g.datetime);return p-v}).forEach((f,g)=>{const p=new Date(f.datetime),v=f.datetime.split("T")[0],u=p.getHours();v!==e&&(e=v,i=!1,n=!1,l=!1,a=!1,r=!1),r||(r=!0,t.push({type:"day",label:this.formatIsoDateToDate(p),iso:f.datetime.split("T")[0]})),u>=0&&u<12&&!i?(t.push({type:"tag",label:"Morning"}),i=!0):u>=12&&u<13&&!n?(t.push({type:"tag",label:"Noon"}),n=!0):u>=13&&u<18&&!l?(t.push({type:"tag",label:"Afternoon"}),l=!0):u>=18&&u<23&&!a&&(t.push({type:"tag",label:"Evening"}),a=!0),t.push({type:"activity",data:f})}),t}},methods:{showViewActivitySheet(t){this.$emit("show-view-activity",t)},addNewActivity(t){this.$emit("add-new-activity",t)},updateActivity(t){this.$emit("update-activity",t)},editSelectedActivity(t){this.$emit("edit-activity",t)},deleteActivity(t){this.$emit("delete-activity",t)},formatIsoDateToTime(t){let e=new Date(t),i=e.getHours();const n=e.getMinutes(),l=i>=12?"PM":"AM";i=i%12,i=i||12;const a=n<10?"0"+n:n;return`${i}:${a} ${l}`},formatIsoDateToDate(t){const e=new Date(t);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(e)}}},Ze={class:"flex flex-col gap-0 p-4 md:p-6 sm:p-8"},$e={class:"flex items-center justify-between"},We={key:0,class:"py-8 text-center flex flex-col items-center justify-center"},Je={key:0,class:"font-semibold text-2xl text-zinc-800 my-4"},Xe={class:"relative z-10 px-4 bg-white text-zinc-500 text-sm font-semibold uppercase"},Qe={class:"w-full text-center mt-8"};function et(t,e,i,n,l,a){const r=h("Button"),f=h("Tag"),g=h("TimelineDot"),p=h("CardActivity");return d(),m("div",Ze,[o("div",$e,[e[5]||(e[5]=o("h3",{class:"font-bold text-3xl sm:text-4xl text-zinc-800 outfit"},"Day Plan",-1)),s(r,{onClick:e[0]||(e[0]=v=>t.$emit("show-add-activity"))},{default:y(()=>e[4]||(e[4]=[D("+ Add Activity")])),_:1})]),o("div",null,[a.groupedActivities.length<=0?(d(),m("div",We,e[6]||(e[6]=[o("i",{class:"ph ph-note-pencil text-4xl text-zinc-300 mb-2"},null,-1),D(),o("span",{class:"text-zinc-500 font-medium text-lg"},"No Activities Yet",-1),o("p",{class:"text-zinc-400 text-sm mt-1"},"Start by adding your first activity.",-1)]))):(d(!0),m(R,{key:1},N(a.groupedActivities,(v,u)=>(d(),m("div",{key:u,class:_(["fadeIn",`fadeIn-${u}`])},[(d(),m("div",{key:"top-"+u,class:"flex items-center justify-between"},[o("button",{onClick:e[1]||(e[1]=c=>t.$emit("show-day-note")),class:"flex items-center gap-2 text-left p-2 -ml-2 rounded-lg hover:bg-zinc-100 transition-colors focus:outline-none focus:ring-2 focus:ring-peach-500"},[v.type==="day"?(d(),m("span",Je,"Day "+x(a.days.indexOf(v.iso)+1)+" - "+x(v.label),1)):T("",!0)]),v.type==="day"?(d(),A(f,{key:0,onClick:e[2]||(e[2]=c=>t.$emit("show-day-note")),label:"+ Add Note",mode:"button"})):T("",!0)])),v.type==="tag"?(d(),m("div",{key:"mid"+u,class:"relative flex items-center justify-center"},[e[7]||(e[7]=o("div",{class:"absolute w-full border-t border-dashed border-zinc-300"},null,-1)),o("span",Xe,x(v.label),1)])):v.type==="activity"?(d(),m("div",{key:"bot"+u,class:"flex flex-row gap-2 md:gap-4"},[s(g,{time:a.formatIsoDateToTime(v.data.datetime),isLast:!1},null,8,["time"]),s(p,{onClick:c=>a.showViewActivitySheet(v.data),iconName:v.data.iconName,title:v.data.title,location:v.data.location,cost:v.data.cost,costNote:v.data.costNote,currency:v.data.costCurrency},null,8,["onClick","iconName","title","location","cost","costNote","currency"])])):T("",!0)],2))),128))]),o("div",Qe,[s(r,{onClick:e[3]||(e[3]=v=>t.$emit("show-add-activity")),variant:"secondary",class:"border border-zinc-200 hover:border-peach-400 w-full"},{default:y(()=>e[8]||(e[8]=[o("i",{class:"ph ph-plus text-lg mr-1"},null,-1),D(" Add Activity ")])),_:1})])])}const tt=k(qe,[["render",et]]),lt={name:"IOSSheet",props:{modelValue:{type:Boolean,default:!1},closeOnClickOutside:{type:Boolean,default:!0},maxHeight:{type:String,default:"90vh"},showHandle:{type:Boolean,default:!0},paddingOn:{type:Boolean,default:!0},dragThreshold:{type:Number,default:100}},emits:["update:modelValue"],data(){return{isDragging:!1,startY:0,dragOffsetY:0,initialSheetY:0}},watch:{modelValue(t){t||this.resetDragState()}},methods:{closeSheet(){this.closeOnClickOutside&&this.$emit("update:modelValue",{showSheet:!1})},startDrag(t){if(!this.modelValue)return;this.isDragging=!0,this.startY=t.touches?t.touches[0].clientY:t.clientY;const e=this.$refs.sheetContent.getBoundingClientRect();this.initialSheetY=e.y,window.addEventListener("touchmove",this.doDrag,{passive:!1}),window.addEventListener("touchend",this.endDrag),window.addEventListener("mousemove",this.doDrag),window.addEventListener("mouseup",this.endDrag)},doDrag(t){if(!this.isDragging)return;let i=(t.touches?t.touches[0].clientY:t.clientY)-this.startY;i<0&&(i=0),this.dragOffsetY=i,t.cancelable&&t.preventDefault()},endDrag(){this.isDragging&&(this.isDragging=!1,window.removeEventListener("touchmove",this.doDrag),window.removeEventListener("touchend",this.endDrag),window.removeEventListener("mousemove",this.doDrag),window.removeEventListener("mouseup",this.endDrag),this.dragOffsetY>this.dragThreshold&&this.$emit("update:modelValue",{showSheet:!1}),this.resetDragState())},resetDragState(){this.startY=0,this.dragOffsetY=0,this.initialSheetY=0}}},ot={key:0,class:"w-10 h-1.5 bg-zinc-300 rounded-full mx-auto mt-3 mb-2 cursor-grab"},at={class:"overflow-y-auto grow h-full flex flex-col"};function it(t,e,i,n,l,a){return d(),A(J,{name:"ios-sheet-slide"},{default:y(()=>[i.modelValue?(d(),m("div",{key:0,class:"p-2 pb-0 sheet-container fixed inset-0 z-[999] flex items-end justify-center",onClick:e[3]||(e[3]=G((...r)=>a.closeSheet&&a.closeSheet(...r),["self"]))},[s(J,{name:"ios-sheet-slide"},{default:y(()=>[i.modelValue?(d(),m("div",{key:0,ref:"sheetContent",class:_([{"px-2":i.paddingOn},"bg-white rounded-t-3xl border-secondary-sm shadow-secondary-md md:min-w-[48rem] min-w-full max-w-lg min-h-[90%] max-h-[90%] flex flex-col"]),style:ee({"max-height":i.maxHeight,transform:`translateY(${l.dragOffsetY}px)`,transition:l.isDragging?"none":"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)"}),onClick:e[2]||(e[2]=G(()=>{},["stop"]))},[o("div",{class:"w-full py-2 flex items-center justify-center flex-shrink-0",onTouchstart:e[0]||(e[0]=G((...r)=>a.startDrag&&a.startDrag(...r),["stop"])),onMousedown:e[1]||(e[1]=G((...r)=>a.startDrag&&a.startDrag(...r),["stop"]))},[i.showHandle?(d(),m("div",ot)):T("",!0)],32),o("div",at,[te(t.$slots,"default",{},void 0,!0)])],6)):T("",!0)]),_:3})])):T("",!0)]),_:3})}const P=k(lt,[["render",it],["__scopeId","data-v-fa8158de"]]),st={name:"TripSettingsSheet",components:{Destination:ge,Dates:ae,InputTitle:ve,Sheet:P,AdvInput:F,Button:I},props:{showSheet:{type:Boolean,default:!1},modelValue:{type:Object,default:()=>({showSheet:!1,trip:{name:"",date:{},location:"",theme:"peach"}}),required:!0}},data(){return{internalTrip:{...this.modelValue.trip}}},watch:{"modelValue.trip":{handler(t){this.internalTrip={...t}},deep:!0,immediate:!0}},methods:{closeSheet(){this.$emit("update:showSheet",!1)},saveSettings(){this.$emit("save",this.internalTrip),this.closeSheet()}}},nt={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-4 py-6"},rt={class:"flex items-center justify-between w-full mb-6"},dt={class:"flex flex-col gap-6 w-full overflow-y-auto pr-2"},ct={class:"p-1"},ut={class:"flex flex-wrap gap-3 p-3 rounded-xl bg-zinc-50 border border-zinc-200"},mt={class:"flex items-start justify-between w-full pt-6 flex-col lg:flex-row gap-5"},pt={class:"flex gap-3 w-full lg:w-fit"};function ht(t,e,i,n,l,a){const r=h("InputTitle"),f=h("AdvInput"),g=h("Destination"),p=h("Dates"),v=h("Button"),u=h("Sheet");return d(),A(u,{"model-value":i.showSheet,"onUpdate:modelValue":a.closeSheet},{default:y(()=>[o("div",nt,[o("div",rt,[e[10]||(e[10]=o("div",{class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},[o("i",{class:"ph ph-gear-six"}),D(),o("span",{class:"font-bold"},"Trip Settings")],-1)),o("button",{onClick:e[0]||(e[0]=(...c)=>a.closeSheet&&a.closeSheet(...c)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[9]||(e[9]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",dt,[s(f,{label:"Trip Name",icon:"ph-paper-plane-tilt"},{default:y(()=>[o("div",ct,[s(r,{modelValue:l.internalTrip.name,"onUpdate:modelValue":e[1]||(e[1]=c=>l.internalTrip.name=c),placeholder:"e.g., Island Hopping Palawan",id:"name",class:"w-full text-2xl font-bold text-zinc-800"},null,8,["modelValue"]),e[11]||(e[11]=o("span",{class:"text-sm text-zinc-500 mt-2 block"}," You can add preparations, activities, and routes after creating the trip. ",-1))])]),_:1}),s(g,{modelValue:l.internalTrip.location,"onUpdate:modelValue":e[2]||(e[2]=c=>l.internalTrip.location=c),summary:l.internalTrip.location},null,8,["modelValue","summary"]),s(p,{modelValue:l.internalTrip.date,"onUpdate:modelValue":e[3]||(e[3]=c=>l.internalTrip.date=c)},null,8,["modelValue"]),o("div",null,[e[12]||(e[12]=o("label",{class:"ml-6 text-sm font-medium text-zinc-900 mb-2 block"},"Color Theme",-1)),o("div",ut,[o("button",{class:_(["w-10 h-10 rounded-full border-2 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-150",{"bg-peach-500 border-peach-600 ring-peach-300":l.internalTrip.theme==="peach","bg-peach-300 border-transparent ring-zinc-300":l.internalTrip.theme!=="peach"}]),onClick:e[4]||(e[4]=c=>l.internalTrip.theme="peach"),title:"Peach Theme"},null,2),o("button",{class:_(["w-10 h-10 rounded-full border-2 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-150",{"bg-blue-500 border-blue-600 ring-blue-300":l.internalTrip.theme==="blue","bg-blue-300 border-transparent ring-zinc-300":l.internalTrip.theme!=="blue"}]),onClick:e[5]||(e[5]=c=>l.internalTrip.theme="blue"),title:"Blue Theme"},null,2),o("button",{class:_(["w-10 h-10 rounded-full border-2 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-150",{"bg-emerald-500 border-emerald-600 ring-emerald-300":l.internalTrip.theme==="emerald","bg-emerald-300 border-transparent ring-zinc-300":l.internalTrip.theme!=="emerald"}]),onClick:e[6]||(e[6]=c=>l.internalTrip.theme="emerald"),title:"Emerald Theme"},null,2),o("button",{class:_(["w-10 h-10 rounded-full border-2 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-150",{"bg-amber-500 border-amber-600 ring-amber-300":l.internalTrip.theme==="amber","bg-amber-300 border-transparent ring-zinc-300":l.internalTrip.theme!=="amber"}]),onClick:e[7]||(e[7]=c=>l.internalTrip.theme="amber"),title:"Amber Theme"},null,2)])])]),o("div",mt,[s(v,{variant:"ghost",onClick:e[8]||(e[8]=c=>t.$emit("delete"))},{default:y(()=>e[13]||(e[13]=[D("Delete")])),_:1}),o("div",pt,[s(v,{class:"w-full lg:w-fit",variant:"secondary",onClick:a.closeSheet},{default:y(()=>e[14]||(e[14]=[D("Cancel")])),_:1},8,["onClick"]),s(v,{class:"w-full lg:w-fit",variant:"primary",onClick:a.saveSettings},{default:y(()=>e[15]||(e[15]=[D("Save Changes")])),_:1},8,["onClick"])])])])]),_:1},8,["model-value","onUpdate:modelValue"])}const ft=k(st,[["render",ht],["__scopeId","data-v-bcaeddd4"]]),vt={name:"Dropdown",props:{items:{type:Array,required:!1},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)},variant:{type:String,default:"primary",validator:t=>["primary","secondary","ghost"].includes(t)},disabled:{type:Boolean,default:!1},customClass:{type:String,default:""}},data(){return{open:!1}},methods:{toggle(){this.open=!this.open},handleSelect(t){this.$emit("select",t),this.open=!1}},computed:{baseClasses(){return"font-medium transition-colors duration-200 cursor-pointer overflow-hidden rounded-full"},sizeClasses(){switch(this.size){case"sm":return"text-sm px-3 py-1.5";case"lg":return"text-lg pl-10 pr-8 py-3";default:return"text-base pl-8 pr-6 py-3"}},variantClasses(){switch(this.variant){case"primary":return"bg-peach-500 text-white hover:bg-peach-600 shadow-primary-sm border-primary-xs";case"secondary":return"bg-zinc-700 text-white hover:bg-zinc-600";case"danger":return"bg-rose-500 text-white hover:bg-rose-600";case"ghost":return"text-peach-700 border border-peach-500 bg-transparent hover:bg-peach-50";default:return""}}}},gt={class:"relative inline-block text-left"},bt=["disabled"],yt={key:0,class:"absolute mt-2 z-20 w-full shadow-secondary-md border-secondary-xs overflow-hidden rounded-2xl bg-white dark:bg-zinc-800 ring-1 ring-zinc-200 dark:ring-zinc-700"},wt={class:"py-1 text-sm text-zinc-700 dark:text-zinc-200"},St=["onClick"];function xt(t,e,i,n,l,a){return d(),m("div",gt,[o("button",{class:_([a.baseClasses,a.sizeClasses,a.variantClasses,i.disabled?"opacity-50 cursor-not-allowed":"","group relative w-full flex items-center justify-between",i.customClass]),disabled:i.disabled,onClick:e[0]||(e[0]=r=>a.toggle())},[o("span",null,[te(t.$slots,"default",{},()=>[e[1]||(e[1]=D("Dropdown"))],!0)]),(d(),m("svg",{class:_(["ml-2 h-4 w-4 transition-transform duration-200",{"rotate-180":l.open}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e[2]||(e[2]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],10,bt),s(J,{name:"fade"},{default:y(()=>[l.open?(d(),m("div",yt,[o("ul",wt,[(d(!0),m(R,null,N(i.items,(r,f)=>(d(),m("li",{key:f,onClick:g=>a.handleSelect(r),class:"px-4 py-2 hover:bg-zinc-100 dark:hover:bg-zinc-700 cursor-pointer"},x(r),9,St))),128))])])):T("",!0)]),_:1})])}const Ct=k(vt,[["render",xt],["__scopeId","data-v-7c351288"]]),_t={components:{Sheet:P,Tag:U,Button:I,Checkbox:ye,Card:X,Input:O,Dropdown:Ct,Select:z},props:{showSheet:{type:Boolean,default:!1},modelValue:{type:Object,default:{preparationsChecklist:[]},required:!0}},data(){return{editMode:!1,activeTab:"all",newTask:{name:"",category:"",notes:""},categoriesOptions:[{label:"Documents",value:"Documents"},{label:"Packing",value:"Packing"},{label:"Essentials",value:"Essentials"}],preparationsChecklist:[...this.modelValue.preparationsChecklist]}},computed:{filteredChecklist(){return this.activeTab==="all"?this.modelValue.preparationsChecklist:this.activeTab==="Not Completed"?this.modelValue.preparationsChecklist.filter(t=>!t.completed):this.activeTab==="Completed"?this.modelValue.preparationsChecklist.filter(t=>t.completed):this.modelValue.preparationsChecklist.filter(t=>t.category===this.activeTab)},categories(){return[...new Set(this.modelValue.preparationsChecklist.map(t=>t.category))]}},watch:{preparationsChecklist:{handler(t){this.$emit("update:modelValue",{...this.modelValue,preparationsChecklist:this.preparationsChecklist})},deep:!0,immediate:!0}},methods:{b0ss(t){this.newTask.category=t},async taskChecked(t,e){console.log(t),await fetch("/api/v1/trip/task",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:t.id,taskData:t})})},toggleEditMode(){this.editMode=!this.editMode},async deleteTask(t){try{const e=this.modelValue.preparationsChecklist.indexOf(t);this.modelValue.preparationsChecklist.splice(e,1);const i=await fetch(`/api/v1/trip/task?tripId=${t.tripId}&taskId=${t.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!i.ok){const n=await i.json();throw new Error(`Error deleting task: ${n.message}`)}}catch(e){console.error(e)}},async addTask(){if(this.newTask.name.trim()!=="")try{const e=window.location.pathname.split("/")[2],n=this.modelValue.preparationsChecklist.push({...this.newTask,task:this.newTask.name})-1,l=await fetch("/api/v1/trip/task",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:this.newTask,tripId:e})});if(!l.ok){const f=await l.json();throw new Error(`Error creating task: ${f.message}`)}const{createdTask:a,taskId:r}=await l.json();this.modelValue.preparationsChecklist[n]=a,this.newTask={name:"",category:"",notes:""}}catch(t){console.error(t)}}}},Tt={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-2 py-1"},Dt={class:"flex items-center justify-between w-full mb-6"},At={class:"flex gap-2 mb-6 flex-wrap items-center w-full"},Vt={class:"ml-auto text-2xl flex place-content-center"},kt={class:"flex-grow w-full pr-2 flex flex-col gap-3 custom-scrollbar"},Rt={class:"ml-auto flex items-center justify-center gap-2"},Nt={key:0,class:"text-sm text-zinc-400"},It=["onClick"],Bt={key:0,class:"text-center text-zinc-500 p-8"},Ut={class:"w-full flex flex-col gap-2 p-4 rounded-4xl shadow-secondary-sm border-secondary-xs mt-6"};function Pt(t,e,i,n,l,a){const r=h("Tag"),f=h("Checkbox"),g=h("Card"),p=h("Input"),v=h("Select"),u=h("Button"),c=h("Sheet");return d(),A(c,{"model-value":i.showSheet,"onUpdate:modelValue":e[7]||(e[7]=w=>{t.$emit("update:showSheet",!1)})},{default:y(()=>[o("div",Tt,[o("div",Dt,[e[9]||(e[9]=o("div",{class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},[o("i",{class:"ph ph-suitcase"}),D(),o("span",{class:"font-bold"},"Preparations Checklist"),o("div",{class:"flex items-center justify-center"})],-1)),o("button",{onClick:e[0]||(e[0]=w=>{t.$emit("update:showSheet",!1)}),class:"text-zinc-500 hover:text-zinc-700 transition"},e[8]||(e[8]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",At,[s(r,{label:"All Tasks",mode:"button",variant:l.activeTab==="all"?"peach":"gray",onClick:e[1]||(e[1]=w=>l.activeTab="all")},null,8,["variant"]),s(r,{label:"Completed",mode:"button",variant:l.activeTab==="Completed"?"peach":"gray",onClick:e[2]||(e[2]=w=>l.activeTab="Completed")},null,8,["variant"]),s(r,{label:"Not Completed",mode:"button",variant:l.activeTab==="Not Completed"?"peach":"gray",onClick:e[3]||(e[3]=w=>l.activeTab="Not Completed")},null,8,["variant"]),(d(!0),m(R,null,N(a.categories,(w,S)=>(d(),A(r,{label:w,key:S,mode:"button",variant:l.activeTab===`${w}`?"peach":"gray",onClick:C=>l.activeTab=`${w}`},null,8,["label","variant","onClick"]))),128)),o("div",Vt,[s(r,{onClick:a.toggleEditMode,label:`Edit ${l.editMode?"On":"Off"}`,mode:"button",variant:"blue"},null,8,["onClick","label"])])]),o("div",kt,[(d(!0),m(R,null,N(a.filteredChecklist,(w,S)=>(d(),A(g,{key:w.id,class:"shadow-secondary-sm border-secondary-xs flex-row!"},{default:y(()=>[s(f,{id:`task-${w.id}`,modelValue:w.completed,"onUpdate:modelValue":C=>w.completed=C,onChange:C=>a.taskChecked(w,C),label:w.task,labelClass:"!text-base font-medium"},null,8,["id","modelValue","onUpdate:modelValue","onChange","label"]),o("div",Rt,[w.notes?(d(),m("span",Nt,x(w.notes),1)):T("",!0),l.editMode?(d(),m("div",{key:1,onClick:C=>a.deleteTask(w),class:"ml-auto flex"},e[10]||(e[10]=[o("i",{class:"ph ph-trash cursor-pointer"},null,-1)]),8,It)):T("",!0)])]),_:2},1024))),128)),a.filteredChecklist.length===0?(d(),m("div",Bt," No tasks in this category. ")):T("",!0)]),o("div",Ut,[s(p,{id:"newTaskNameInput",type:"text",modelValue:l.newTask.name,"onUpdate:modelValue":e[4]||(e[4]=w=>l.newTask.name=w),placeholder:"Add a new preparation task...",class:"mb-2",label:"Task"},null,8,["modelValue"]),s(v,{id:"bro",options:l.categoriesOptions,modelValue:l.newTask.category,"onUpdate:modelValue":e[5]||(e[5]=w=>l.newTask.category=w),placeholder:"Select or Enter a Category",label:"Category"},null,8,["options","modelValue"]),s(p,{id:"newTaskNotesInput",type:"text",modelValue:l.newTask.notes,"onUpdate:modelValue":e[6]||(e[6]=w=>l.newTask.notes=w),placeholder:"Optional notes for this task...",class:"mb-2",label:"Notes"},null,8,["modelValue"]),s(u,{onClick:a.addTask,class:"w-full mt-2"},{default:y(()=>e[11]||(e[11]=[D(" Add Task ")])),_:1},8,["onClick"])])])]),_:1},8,["model-value"])}const Lt=k(_t,[["render",Pt],["__scopeId","data-v-86331946"]]),se=[{label:"AED",value:"AED"},{label:"AFN",value:"AFN"},{label:"ALL",value:"ALL"},{label:"AMD",value:"AMD"},{label:"ANG",value:"ANG"},{label:"AOA",value:"AOA"},{label:"ARS",value:"ARS"},{label:"AUD",value:"AUD"},{label:"AWG",value:"AWG"},{label:"AZN",value:"AZN"},{label:"BAM",value:"BAM"},{label:"BBD",value:"BBD"},{label:"BDT",value:"BDT"},{label:"BGN",value:"BGN"},{label:"BHD",value:"BHD"},{label:"BIF",value:"BIF"},{label:"BMD",value:"BMD"},{label:"BND",value:"BND"},{label:"BOB",value:"BOB"},{label:"BOV",value:"BOV"},{label:"BRL",value:"BRL"},{label:"BSD",value:"BSD"},{label:"BTN",value:"BTN"},{label:"BWP",value:"BWP"},{label:"BYN",value:"BYN"},{label:"BZD",value:"BZD"},{label:"CAD",value:"CAD"},{label:"CDF",value:"CDF"},{label:"CHE",value:"CHE"},{label:"CHF",value:"CHF"},{label:"CHW",value:"CHW"},{label:"CLF",value:"CLF"},{label:"CLP",value:"CLP"},{label:"CNY",value:"CNY"},{label:"COP",value:"COP"},{label:"COU",value:"COU"},{label:"CRC",value:"CRC"},{label:"CUC",value:"CUC"},{label:"CUP",value:"CUP"},{label:"CVE",value:"CVE"},{label:"CZK",value:"CZK"},{label:"DJF",value:"DJF"},{label:"DKK",value:"DKK"},{label:"DOP",value:"DOP"},{label:"DZD",value:"DZD"},{label:"EGP",value:"EGP"},{label:"ERN",value:"ERN"},{label:"ETB",value:"ETB"},{label:"EUR",value:"EUR"},{label:"FJD",value:"FJD"},{label:"FKP",value:"FKP"},{label:"GBP",value:"GBP"},{label:"GEL",value:"GEL"},{label:"GHS",value:"GHS"},{label:"GIP",value:"GIP"},{label:"GMD",value:"GMD"},{label:"GNF",value:"GNF"},{label:"GTQ",value:"GTQ"},{label:"GYD",value:"GYD"},{label:"HKD",value:"HKD"},{label:"HNL",value:"HNL"},{label:"HTG",value:"HTG"},{label:"HUF",value:"HUF"},{label:"IDR",value:"IDR"},{label:"ILS",value:"ILS"},{label:"INR",value:"INR"},{label:"IQD",value:"IQD"},{label:"IRR",value:"IRR"},{label:"ISK",value:"ISK"},{label:"JMD",value:"JMD"},{label:"JOD",value:"JOD"},{label:"JPY",value:"JPY"},{label:"KES",value:"KES"},{label:"KGS",value:"KGS"},{label:"KHR",value:"KHR"},{label:"KMF",value:"KMF"},{label:"KPW",value:"KPW"},{label:"KRW",value:"KRW"},{label:"KWD",value:"KWD"},{label:"KYD",value:"KYD"},{label:"KZT",value:"KZT"},{label:"LAK",value:"LAK"},{label:"LBP",value:"LBP"},{label:"LKR",value:"LKR"},{label:"LRD",value:"LRD"},{label:"LSL",value:"LSL"},{label:"LYD",value:"LYD"},{label:"MAD",value:"MAD"},{label:"MDL",value:"MDL"},{label:"MGA",value:"MGA"},{label:"MKD",value:"MKD"},{label:"MMK",value:"MMK"},{label:"MNT",value:"MNT"},{label:"MOP",value:"MOP"},{label:"MRU",value:"MRU"},{label:"MUR",value:"MUR"},{label:"MVR",value:"MVR"},{label:"MWK",value:"MWK"},{label:"MXN",value:"MXN"},{label:"MYR",value:"MYR"},{label:"MZN",value:"MZN"},{label:"NAD",value:"NAD"},{label:"NGN",value:"NGN"},{label:"NIO",value:"NIO"},{label:"NOK",value:"NOK"},{label:"NPR",value:"NPR"},{label:"NZD",value:"NZD"},{label:"OMR",value:"OMR"},{label:"PAB",value:"PAB"},{label:"PEN",value:"PEN"},{label:"PGK",value:"PGK"},{label:"PHP",value:"PHP"},{label:"PKR",value:"PKR"},{label:"PLN",value:"PLN"},{label:"PYG",value:"PYG"},{label:"QAR",value:"QAR"},{label:"RON",value:"RON"},{label:"RSD",value:"RSD"},{label:"RUB",value:"RUB"},{label:"RWF",value:"RWF"},{label:"SAR",value:"SAR"},{label:"SBD",value:"SBD"},{label:"SCR",value:"SCR"},{label:"SDG",value:"SDG"},{label:"SEK",value:"SEK"},{label:"SGD",value:"SGD"},{label:"SHP",value:"SHP"},{label:"SLE",value:"SLE"},{label:"SOS",value:"SOS"},{label:"SRD",value:"SRD"},{label:"SSP",value:"SSP"},{label:"STN",value:"STN"},{label:"SVC",value:"SVC"},{label:"SYP",value:"SYP"},{label:"SZL",value:"SZL"},{label:"THB",value:"THB"},{label:"TJS",value:"TJS"},{label:"TMT",value:"TMT"},{label:"TND",value:"TND"},{label:"TOP",value:"TOP"},{label:"TRY",value:"TRY"},{label:"TTD",value:"TTD"},{label:"TWD",value:"TWD"},{label:"TZS",value:"TZS"},{label:"UAH",value:"UAH"},{label:"UGX",value:"UGX"},{label:"USD",value:"USD"},{label:"UYU",value:"UYU"},{label:"UZS",value:"UZS"},{label:"VES",value:"VES"},{label:"VND",value:"VND"},{label:"VUV",value:"VUV"},{label:"WST",value:"WST"},{label:"XAF",value:"XAF"},{label:"XCD",value:"XCD"},{label:"XDR",value:"XDR"},{label:"XOF",value:"XOF"},{label:"XPF",value:"XPF"},{label:"YER",value:"YER"},{label:"ZAR",value:"ZAR"},{label:"ZMW",value:"ZMW"},{label:"ZWG",value:"ZWG"}],Et={name:"Select2",props:{modelValue:{type:[String,Number,null],default:null},id:{type:String,required:!0},label:String,placeholder:{type:String,default:"Select an option"},options:{type:Array,required:!0},optionLabel:{type:String,default:"label"},optionValue:{type:String,default:"value"},disabled:{type:Boolean,default:!1},error:{type:String,default:""},customClass:{type:String,default:""},prefix:{type:String,default:""},prefixIcon:{type:String,default:""},suffix:{type:String,default:""}},emits:["update:modelValue"],data(){return{showOptions:!1}},computed:{baseClasses(){return`
        w-full py-3 text-base rounded-full border-secondary-xs
        text-zinc-800 text-left
        bg-white!
        shadow-secondary-sm focus:ring-0 focus:outline-none
        relative flex items-center
      `},suffixIcon(){return this.showOptions?"caret-up":"caret-down"},displayValue(){const t=this.options.find(e=>e[this.optionValue]===this.modelValue);return t?t[this.optionLabel]:null}},methods:{toggleOptions(){this.showOptions=!this.showOptions},selectOption(t){this.$emit("update:modelValue",t[this.optionValue]),this.showOptions=!1},handleBlur(){setTimeout(()=>{this.showOptions=!1},150)}}},Ot={class:"flex flex-col gap-1"},Ft=["for"],zt={class:"relative"},Mt=["id","disabled"],jt={key:0,class:"absolute left-0 pl-6 flex items-center h-full pointer-events-none text-zinc-500 dark:text-zinc-400 z-10"},Gt={key:1,class:"absolute left-0 pl-6 flex items-center h-full pointer-events-none text-zinc-500 dark:text-zinc-400 z-10"},Kt={class:"absolute right-0 top-0 pr-3 flex items-center h-full text-zinc-500 dark:text-zinc-400 pointer-events-none z-10"},Ht={key:0},Yt={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-zinc-200 rounded-lg shadow-lg z-20 max-h-60 overflow-y-auto"},qt={role:"listbox"},Zt=["onMousedown"],$t={key:1,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-zinc-200 rounded-lg shadow-lg z-20 p-4 text-zinc-500 text-center"},Wt={key:1,class:"text-sm text-red-500"};function Jt(t,e,i,n,l,a){return d(),m("div",Ot,[i.label?(d(),m("label",{key:0,for:i.id,class:"ml-6 text-sm font-medium text-zinc-900"},x(i.label),9,Ft)):T("",!0),o("div",zt,[o("button",{id:i.id,type:"button",disabled:i.disabled,class:_([a.baseClasses,i.prefix||i.prefixIcon?"pl-12":"pl-6",i.suffix||a.suffixIcon?"pr-12":"pr-6",i.disabled?"bg-zinc-100 cursor-not-allowed":"",i.customClass]),onClick:e[0]||(e[0]=(...r)=>a.toggleOptions&&a.toggleOptions(...r)),onBlur:e[1]||(e[1]=(...r)=>a.handleBlur&&a.handleBlur(...r))},[i.prefix?(d(),m("div",jt,x(i.prefix),1)):T("",!0),i.prefixIcon?(d(),m("div",Gt,[o("i",{class:_(i.prefixIcon)},null,2)])):T("",!0),o("span",{class:_({"text-zinc-500":!a.displayValue})},x(a.displayValue||i.placeholder),3),o("div",Kt,[i.suffix?(d(),m("span",Ht,x(i.suffix),1)):(d(),m("i",{key:1,class:_(`ph ph-${a.suffixIcon}`)},null,2))])],42,Mt),l.showOptions&&i.options.length>0?(d(),m("div",Yt,[o("ul",qt,[(d(!0),m(R,null,N(i.options,(r,f)=>(d(),m("li",{key:r[i.optionValue],class:_(["px-4 py-2 cursor-pointer hover:bg-peach-100",{"bg-peach-100":r[i.optionValue]===i.modelValue}]),onMousedown:G(g=>a.selectOption(r),["prevent"])},x(r[i.optionLabel]),43,Zt))),128))])])):l.showOptions&&i.options.length===0&&!i.disabled?(d(),m("div",$t," No options available ")):T("",!0)]),i.error?(d(),m("p",Wt,x(i.error),1)):T("",!0)])}const ne=k(Et,[["render",Jt],["__scopeId","data-v-d35d8fd5"]]),Xt={components:{Select2:ne,Sheet:P,Tag:U,Button:I,Input:O,Select:z,AdvInput:F},props:{showSheet:{type:Boolean,default:!1},dateRange:{type:Object,required:!0},modelValue:{type:Object,default:()=>({showSheet:!1,activity:null}),required:!0}},data(){return{error:"",suggestions:[],searchTimeout:null,autocompleteService:null,placesService:null,currencies:se,localActivity:this.getInitialActivityState(),activityIcons:["ph-bus","ph-coffee","ph-tree","ph-bowl-food","ph-palette","ph-bed","ph-pizza","ph-airplane","ph-car","ph-train","ph-bicycle","ph-camera","ph-map-pin","ph-shopping-bag","ph-storefront","ph-swimming-pool","ph-mountains","ph-tent","ph-binoculars","ph-campfire","ph-first-aid","ph-currency-circle-dollar","ph-calendar","ph-sparkle","ph-sun","ph-moon","ph-globe-hemisphere-east","ph-gift","ph-ticket","ph-book-open","ph-microphone-stage","ph-park","ph-compass","ph-cloud-sun","ph-cloud-rain","ph-wifi-high","ph-device-mobile","ph-user-list","ph-cookie","ph-question"]}},mounted(){this.loadGoogleMapsScript()},computed:{isEditing(){return this.modelValue.activity&&this.modelValue.activity.id},localActivityFormat(){return{...this.localActivity,datetime:`${this.localActivity.date}T${this.localActivity.time}:00`}},days(){const t=[];new Date(this.dateRange.start);const e=new Date(this.dateRange.end),i=this.getLocale();let n=new Date(this.dateRange.start),l=1;for(;n<=e;){const a=n.toISOString().split("T")[0],r=new Intl.DateTimeFormat(i,{weekday:"short",month:"short",day:"numeric"}).format(n);t.push({value:a,label:`Day ${l} (${r})`}),n.setDate(n.getDate()+1),l++}return t}},watch:{"modelValue.showSheet":{immediate:!0,handler(t){t&&(this.localActivity=this.modelValue.activity?JSON.parse(JSON.stringify(this.modelValue.activity)):this.getInitialActivityState())}}},methods:{getLocale(){return navigator.language||"en-US"},getInitialActivityState(){return{name:"",time:"",date:"",location:"",cost:0,costCurrency:"PHP",costNote:"",description:"",iconName:""}},selectIcon(t){this.localActivity.iconName=t},handleSheetClose(){this.$emit("update:showSheet",!1),this.localActivity=this.getInitialActivityState()},cancelActivity(){this.handleSheetClose()},saveActivity(){if(!this.localActivity.title?.trim()){this.error="Activity name is required!";return}if(!this.localActivity.time||!this.localActivity.date){this.error="Please select date and time";return}this.$emit("activity-saved",this.localActivityFormat),this.handleSheetClose()},loadGoogleMapsScript(){const t="AIzaSyD0ueloZ3TtHb8vff0f7R5Umdihxfu_FyQ";if(window.google&&window.google.maps){this.initGoogleServices();return}const e=document.querySelector("#google-maps-script");if(e){e.addEventListener("load",()=>this.initGoogleServices());return}const i=document.createElement("script");i.id="google-maps-script",i.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places`,i.async=!0,i.defer=!0,i.onload=()=>this.initGoogleServices(),document.head.appendChild(i)},initGoogleServices(){try{this.autocompleteService=new google.maps.places.AutocompleteService,this.placesService=new google.maps.places.PlacesService(document.createElement("div"))}catch(t){console.error("Failed to initialize Google Maps services:",t)}},async searchLocations(t){const e=t.target.value.trim();if(clearTimeout(this.searchTimeout),!e||!this.placesService){this.suggestions=[];return}this.searchTimeout=setTimeout(()=>{this.placesService.textSearch({query:e,region:"ph"},(i,n)=>{n===google.maps.places.PlacesServiceStatus.OK&&i?.length?this.suggestions=i.map(l=>({place_id:l.place_id,display_name:`${l.name}${l.formatted_address?`, ${l.formatted_address}`:""}`,location:l.geometry?.location||null})):this.suggestions=[]})},300)},selectSuggestion(t){this.localActivity.location=t.display_name,t.location&&(this.localActivity.coordinates={latitude:t.location.lat(),longitude:t.location.lng()}),this.suggestions=[]}}},Qt={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-1 py-2"},el={class:"flex items-center justify-between w-full mb-6"},tl={class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},ll={class:"font-bold"},ol={class:"flex-grow w-full pr-2 flex flex-col gap-6 custom-scrollbar"},al={class:"flex flex-col gap-4"},il={class:"grid grid-cols-2 gap-4"},sl={class:"relative"},nl={key:0,class:"absolute z-30 bg-white border border-zinc-200 rounded-md shadow-md w-full mt-1 max-h-48 overflow-y-auto"},rl=["onClick"],dl={class:"flex flex-col gap-4"},cl={class:"grid grid-cols-2 gap-4"},ul={class:"flex flex-col gap-4"},ml={class:"flex flex-wrap justify-center gap-3 p-1"},pl=["onClick"],hl={class:"py-2"},fl={class:"text-rose-500"},vl={class:"flex flex-col sm:flex-row gap-4 pt-6 grow w-full"};function gl(t,e,i,n,l,a){const r=h("Input"),f=h("Select2"),g=h("Select"),p=h("Button"),v=h("Sheet");return d(),A(v,{"model-value":i.showSheet,"onUpdate:modelValue":a.handleSheetClose},{default:y(()=>[o("div",Qt,[o("div",el,[o("div",tl,[o("i",{class:_(a.isEditing?"ph ph-pencil-simple":"ph ph-plus-circle")},null,2),o("span",ll,x(a.isEditing?`Edit Activity: ${l.localActivity.title||"(Unnamed)"}`:"Add New Activity"),1)]),o("button",{onClick:e[0]||(e[0]=(...u)=>a.handleSheetClose&&a.handleSheetClose(...u)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[9]||(e[9]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",ol,[s(r,{id:"addActivityName",modelValue:l.localActivity.title,"onUpdate:modelValue":e[1]||(e[1]=u=>l.localActivity.title=u),placeholder:"e.g., Explore Mines View Park",label:"Activity Name (Required)",icon:"ph-article"},null,8,["modelValue"]),o("div",al,[e[10]||(e[10]=o("label",{for:"addActivityDate",class:"ml-6 text-sm font-medium text-zinc-900"}," Date & Time ",-1)),o("div",il,[s(f,{class:"w-full",modelValue:l.localActivity.date,"onUpdate:modelValue":e[2]||(e[2]=u=>l.localActivity.date=u),id:"addActivityDate",label:"Date (Required)",options:a.days,placeholder:a.isEditing&&l.localActivity.date?new Intl.DateTimeFormat(a.getLocale(),{month:"short",day:"numeric"}).format(new Date(l.localActivity.date+"T00:00:000")):"Select Date",icon:"ph-calendar"},null,8,["modelValue","options","placeholder"]),s(r,{id:"addActivityTime",modelValue:l.localActivity.time,"onUpdate:modelValue":e[3]||(e[3]=u=>l.localActivity.time=u),type:"time",label:"Time (Required)",icon:"ph-clock"},null,8,["modelValue"])])]),o("div",sl,[s(r,{id:"addActivityLocation",modelValue:l.localActivity.location,"onUpdate:modelValue":e[4]||(e[4]=u=>l.localActivity.location=u),placeholder:"e.g., Mines View Park, Baguio City",label:"Location",icon:"ph-map-pin",onInput:a.searchLocations},null,8,["modelValue","onInput"]),l.suggestions.length>0?(d(),m("ul",nl,[(d(!0),m(R,null,N(l.suggestions,(u,c)=>(d(),m("li",{key:c,onClick:w=>a.selectSuggestion(u),class:"px-3 py-2 hover:bg-zinc-100 cursor-pointer text-sm"},x(u.display_name),9,rl))),128))])):T("",!0)]),o("div",dl,[e[11]||(e[11]=o("label",{for:"addActivityBudget",class:"ml-6 text-sm font-medium text-zinc-900"}," Budget ",-1)),o("div",cl,[s(r,{id:"addActivityBudget",modelValue:l.localActivity.cost,"onUpdate:modelValue":e[5]||(e[5]=u=>l.localActivity.cost=u),modelModifiers:{number:!0},type:"number",placeholder:"e.g., 150.00",label:"Amount",prefix:"₱",min:"0",step:.01,icon:"ph-currency-circle-dollar"},null,8,["modelValue"]),s(g,{modelValue:l.localActivity.costCurrency,"onUpdate:modelValue":e[6]||(e[6]=u=>l.localActivity.costCurrency=u),id:"activity-budget-currency",label:"Currency",options:l.currencies,icon:"ph-wallet"},null,8,["modelValue","options"])]),s(r,{id:"addActivityCostNote",modelValue:l.localActivity.costNote,"onUpdate:modelValue":e[7]||(e[7]=u=>l.localActivity.costNote=u),placeholder:"e.g., per person, entrance fee",label:"Budget Notes",icon:"ph-note"},null,8,["modelValue"])]),s(r,{id:"addActivityDescription",modelValue:l.localActivity.description,"onUpdate:modelValue":e[8]||(e[8]=u=>l.localActivity.description=u),type:"textarea",rows:"3",placeholder:"Add more details about this activity...",label:"Description",icon:"ph-notepad"},null,8,["modelValue"]),o("div",ul,[e[12]||(e[12]=o("label",{class:"ml-6 text-sm font-medium text-zinc-900"}," Activity Type Icon ",-1)),o("div",ml,[(d(!0),m(R,null,N(l.activityIcons,u=>(d(),m("button",{key:u,onClick:c=>a.selectIcon(u),class:_(["w-10 h-10 rounded-full border-2 transition-all duration-200 aspect-square flex items-center justify-center text-xl",l.localActivity.iconName===u?"border-peach-500 text-peach-600 bg-peach-50":"border-zinc-200 text-zinc-500 hover:border-peach-300 hover:text-peach-500"])},[o("i",{class:_(["ph",u])},null,2)],10,pl))),128))])])]),o("div",hl,[o("span",fl,x(l.error),1)]),o("div",vl,[s(p,{class:"w-full",onClick:a.cancelActivity,variant:"secondary"},{default:y(()=>e[13]||(e[13]=[D(" Cancel ")])),_:1},8,["onClick"]),s(p,{class:"w-full",onClick:a.saveActivity,disabled:!l.localActivity.title&&!l.localActivity.date&&!l.localActivity.time},{default:y(()=>[D(x(a.isEditing?"Save Changes":"Add Activity"),1)]),_:1},8,["onClick","disabled"])])])]),_:1},8,["model-value","onUpdate:modelValue"])}const bl=k(Xt,[["render",gl],["__scopeId","data-v-9bd699d5"]]),yl={components:{Select2:ne,Sheet:P,Button:I,Input:O,Select:z},props:{showSheet:{type:Boolean,default:!1},dateRange:{type:Object,required:!0},modelValue:{type:Object,default:()=>({showSheet:!1,activity:null}),required:!0}},data(){return{localActivity:this.getInitialActivityState(),currencies:se.map(t=>({label:`${t.label} (${t.value})`,value:t.value})),activityIcons:["ph-bus","ph-coffee","ph-tree","ph-bowl-food","ph-palette","ph-bed","ph-pizza","ph-airplane","ph-car","ph-train","ph-bicycle","ph-camera","ph-map-pin","ph-shopping-bag","ph-storefront","ph-swimming-pool","ph-mountains","ph-tent","ph-binoculars","ph-campfire","ph-first-aid","ph-currency-circle-dollar","ph-calendar","ph-sparkle","ph-sun","ph-moon","ph-globe-hemisphere-east","ph-gift","ph-ticket","ph-book-open","ph-microphone-stage","ph-park","ph-compass","ph-cloud-sun","ph-cloud-rain","ph-wifi-high","ph-device-mobile","ph-user-list","ph-cookie","ph-question"],validationErrors:{title:"",date:"",time:"",dateTimeCombo:"",location:"",cost:"",costCurrency:"",costNote:"",description:"",iconName:""}}},computed:{localActivityFormat(){return{...this.localActivity,datetime:`${this.localActivity.date}T${this.localActivity.time}:00`}},isEditing(){return this.modelValue.activity&&this.modelValue.activity.id},days(){const t=[],e=new Date(this.dateRange.start),i=new Date(this.dateRange.end),n=this.getLocale();let l=new Date(e),a=1;for(;l<=i;){const r=l.getFullYear(),f=l.getMonth()+1<10?`0${l.getMonth()+1}`:`${l.getMonth()+1}`,g=l.getDate()<10?`0${l.getDate()}`:`${l.getDate()}`,p=`${r}-${f}-${g}`,v=new Intl.DateTimeFormat(n,{weekday:"short",month:"short",day:"numeric"}).format(l);t.push({value:p,label:`Day ${a} (${v})`}),l.setUTCDate(l.getUTCDate()+1),a++}return t},isFormValid(){return!this.localActivity.title.trim()&&!this.localActivity.date&&!this.localActivity.time?!1:!Object.values(this.validationErrors).some(e=>e!=="")},activityDateTimeSummary(){const t=[];return this.localActivity.time&&t.push(`at ${this.localActivity.time}`),this.localActivity.date&&t.push(`on ${this.localActivity.date}`),t.length>0?t.join(" "):"Set time & date"},activityBudgetSummary(){if(this.localActivity.cost>0){let e=new Intl.NumberFormat(this.getLocale(),{style:"currency",currency:this.localActivity.costCurrency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.localActivity.cost);return this.localActivity.costNote&&(e+=` (${this.localActivity.costNote})`),e}return"Enter estimated cost"},selectedIconSummary(){return(this.localActivity.iconName?this.localActivity.iconName.replace("ph-","").replace(/-/g," "):"Choose an icon").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},watch:{modelValue(t){t&&(this.localActivity=t.activity)},"localActivity.title"(t){t.trim()!==""&&(this.validationErrors.title="")},"localActivity.date"(t){t&&(this.validationErrors.date="",this.validationErrors.dateTimeCombo="")},"localActivity.time"(t){t&&(this.validationErrors.time="",this.validationErrors.dateTimeCombo="")}},methods:{getLocale(){return navigator.language||"en-US"},generateUniqueId(){return Date.now()+Math.random().toString(36).substring(2,9)},getInitialActivityState(){return{id:this.generateUniqueId(),title:"",time:"",date:"",location:"",cost:0,costCurrency:"PHP",costNote:"",description:"",iconName:""}},selectIcon(t){this.localActivity.iconName=t},clearValidationErrors(){for(const t in this.validationErrors)this.validationErrors[t]=""},handleSheetClose(){this.$emit("update:showSheet",!1),this.localActivity=this.getInitialActivityState(),this.clearValidationErrors()},cancelActivity(){this.handleSheetClose()},saveActivity(){this.clearValidationErrors();let t=!0;if(this.localActivity.title.trim()||(this.validationErrors.title="Activity name is required.",t=!1),this.localActivity.time&&!this.localActivity.date&&(this.validationErrors.date="Date is required if time is set.",this.validationErrors.dateTimeCombo="A date must be selected if time is entered.",t=!1),this.localActivity.date){const e=new Date(this.localActivity.date),i=new Date(this.dateRange.start);i.setHours(0,0,0,0);const n=new Date(this.dateRange.end);n.setHours(23,59,59,59),(e<=i||e>=n)&&(this.validationErrors.date=`Date must be within the trip range ${e} (${i} - ${n}).`,t=!1)}this.localActivity.cost<0&&(this.validationErrors.cost="Cost cannot be negative.",t=!1),t&&(this.$emit("activity-saved",this.localActivityFormat),this.handleSheetClose())}}},wl={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-1 py-2"},Sl={class:"flex items-center justify-between w-full mb-6"},xl={class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},Cl={class:"font-bold"},_l={class:"flex-grow w-full pr-2 flex flex-col gap-6 custom-scrollbar"},Tl={class:"flex flex-col gap-4"},Dl={class:"grid grid-cols-2 gap-4"},Al={key:0,class:"text-sm text-red-500 ml-6 -mt-3"},Vl={class:"flex flex-col gap-4"},kl={class:"grid grid-cols-2 gap-4"},Rl={class:"flex flex-col gap-4"},Nl={class:"flex flex-wrap justify-center gap-3 p-1"},Il=["onClick"],Bl={key:0,class:"py-2"},Ul={class:"flex flex-col sm:flex-row gap-4 pt-6 w-full"};function Pl(t,e,i,n,l,a){const r=h("Input"),f=h("Select2"),g=h("Select"),p=h("Button"),v=h("Sheet");return d(),A(v,{"model-value":i.showSheet,"onUpdate:modelValue":a.handleSheetClose},{default:y(()=>[o("div",wl,[o("div",Sl,[o("div",xl,[o("i",{class:_(a.isEditing?"ph ph-pencil-simple":"ph ph-plus-circle")},null,2),o("span",Cl,x(a.isEditing?`Edit Activity: ${l.localActivity.title||"(Unnamed)"}`:"Add New Activity"),1)]),o("button",{onClick:e[0]||(e[0]=(...u)=>a.handleSheetClose&&a.handleSheetClose(...u)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[9]||(e[9]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",_l,[s(r,{id:"activityTitle",modelValue:l.localActivity.title,"onUpdate:modelValue":e[1]||(e[1]=u=>l.localActivity.title=u),placeholder:"e.g., Explore Mines View Park",label:"Activity Name (Required)",icon:"ph-article",error:l.validationErrors.title},null,8,["modelValue","error"]),o("div",Tl,[e[10]||(e[10]=o("label",{for:"activityDate",class:"ml-6 text-sm font-medium text-zinc-900"}," Date & Time ",-1)),o("div",Dl,[s(f,{class:"w-full",modelValue:l.localActivity.date,"onUpdate:modelValue":e[2]||(e[2]=u=>l.localActivity.date=u),id:"activityDate",label:"Date (Required)",options:a.days,placeholder:l.localActivity.date?new Intl.DateTimeFormat(a.getLocale(),{month:"short",day:"numeric"}).format(new Date(l.localActivity.date+"T00:00:00Z")):"Select Date",icon:"ph-calendar",error:l.validationErrors.date},null,8,["modelValue","options","placeholder","error"]),s(r,{id:"activityTime",modelValue:l.localActivity.time,"onUpdate:modelValue":e[3]||(e[3]=u=>l.localActivity.time=u),type:"time",label:"Time (Required)",icon:"ph-clock",error:l.validationErrors.time},null,8,["modelValue","error"])]),l.validationErrors.dateTimeCombo?(d(),m("p",Al,x(l.validationErrors.dateTimeCombo),1)):T("",!0)]),s(r,{id:"activityLocation",modelValue:l.localActivity.location,"onUpdate:modelValue":e[4]||(e[4]=u=>l.localActivity.location=u),placeholder:"e.g., Mines View Park, Baguio City",label:"Location",icon:"ph-map-pin",error:l.validationErrors.location},null,8,["modelValue","error"]),o("div",Vl,[e[11]||(e[11]=o("label",{for:"activityCost",class:"ml-6 text-sm font-medium text-zinc-900"}," Budget ",-1)),o("div",kl,[s(r,{id:"activityCost",modelValue:l.localActivity.cost,"onUpdate:modelValue":e[5]||(e[5]=u=>l.localActivity.cost=u),modelModifiers:{number:!0},type:"number",placeholder:"e.g., 150.00",label:"Amount",prefix:"₱",min:"0",step:.01,icon:"ph-currency-circle-dollar",error:l.validationErrors.cost},null,8,["modelValue","error"]),s(g,{modelValue:l.localActivity.costCurrency,"onUpdate:modelValue":e[6]||(e[6]=u=>l.localActivity.costCurrency=u),id:"activity-cost-currency",label:"Currency",options:l.currencies,icon:"ph-wallet",error:l.validationErrors.costCurrency},null,8,["modelValue","options","error"])]),s(r,{id:"activityCostNote",modelValue:l.localActivity.costNote,"onUpdate:modelValue":e[7]||(e[7]=u=>l.localActivity.costNote=u),placeholder:"e.g., per person, entrance fee",label:"Budget Notes",icon:"ph-note",error:l.validationErrors.costNote},null,8,["modelValue","error"])]),s(r,{id:"activityDescription",modelValue:l.localActivity.description,"onUpdate:modelValue":e[8]||(e[8]=u=>l.localActivity.description=u),type:"textarea",rows:"3",placeholder:"Add more details about this activity...",label:"Description",icon:"ph-notepad",error:l.validationErrors.description},null,8,["modelValue","error"]),o("div",Rl,[e[12]||(e[12]=o("label",{class:"ml-6 text-sm font-medium text-zinc-900"}," Activity Type Icon ",-1)),o("div",Nl,[(d(!0),m(R,null,N(l.activityIcons,u=>(d(),m("button",{key:u,onClick:c=>a.selectIcon(u),class:_(["w-10 h-10 rounded-full border-2 transition-all duration-200 aspect-square flex items-center justify-center text-xl",l.localActivity.iconName===u?"border-peach-500 text-peach-600 bg-peach-50":"border-zinc-200 text-zinc-500 hover:border-peach-300 hover:text-peach-500"])},[o("i",{class:_(["ph",u])},null,2)],10,Il))),128))])])]),Object.values(l.validationErrors).some(u=>u)?(d(),m("div",Bl,e[13]||(e[13]=[o("span",{class:"text-rose-500 text-sm"},"Please fix the errors above to save.",-1)]))):T("",!0),o("div",Ul,[s(p,{class:"w-full",onClick:a.cancelActivity,variant:"secondary"},{default:y(()=>e[14]||(e[14]=[D(" Cancel ")])),_:1},8,["onClick"]),s(p,{class:"w-full",onClick:a.saveActivity,disabled:!a.isFormValid},{default:y(()=>[D(x(a.isEditing?"Save Changes":"Add Activity"),1)]),_:1},8,["onClick","disabled"])])])]),_:1},8,["model-value","onUpdate:modelValue"])}const Ll=k(yl,[["render",Pl],["__scopeId","data-v-65455403"]]),El={components:{Sheet:P,Button:I},props:{showSheet:{type:Boolean,default:!1},modelValue:{type:Object,default:()=>({showSheet:!1,activity:null}),required:!0}},computed:{activity(){return this.modelValue.activity||{}},activityDateTimeDisplay(){const t=[];if(this.activity.date)try{const e=new Date(this.activity.date+"T00:00:00");t.push(e.toLocaleDateString(this.getLocale(),{year:"numeric",month:"long",day:"numeric"}))}catch(e){console.error("Error parsing date:",this.activity.date,e),t.push(this.activity.date)}if(this.activity.time)try{const e=new Date(`2000-01-01T${this.activity.time}:00`);t.push(e.toLocaleTimeString(this.getLocale(),{hour:"numeric",minute:"2-digit",hour12:!0}))}catch(e){console.error("Error parsing time:",this.activity.time,e),t.push(this.activity.time)}return t.length>0?t.join(" at "):"Time & Date not set"},formattedBudget(){return this.activity.cost>0?new Intl.NumberFormat(this.getLocale(),{style:"currency",currency:this.activity.costCurrency||"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(this.activity.cost):this.activity.costNote&&this.activity.costNote.trim()!==""?"Not specified":"No estimated cost"}},methods:{getLocale(){return navigator.language||"en-US"},handleSheetClose(){this.$emit("update:showSheet",!1)},handleEditClick(){this.$emit("edit-activity",this.activity),this.handleSheetClose()},handleDeleteClick(){confirm(`Are you sure you want to delete "${this.activity.title}"? This action cannot be undone.`)&&(this.$emit("delete-activity",this.activity.id),this.handleSheetClose())}}},Ol={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-1 py-2"},Fl={class:"flex items-center justify-between w-full mb-6 pb-2 border-b border-zinc-100"},zl={class:"flex gap-3 items-center text-3xl text-zinc-800 max-w-full"},Ml={class:"font-bold"},jl={key:0,class:"flex-grow w-full pr-2 flex flex-col gap-6 custom-scrollbar"},Gl={key:0,class:"flex flex-col"},Kl={class:"flex items-center gap-2 text-zinc-700"},Hl={class:"text-base"},Yl={key:1,class:"flex flex-col"},ql={class:"flex items-center gap-2 text-zinc-700"},Zl={class:"text-base"},$l={key:2,class:"flex flex-col"},Wl={class:"flex items-center gap-2 text-zinc-700"},Jl={class:"text-base font-semibold"},Xl={key:0,class:"text-zinc-500 text-sm opacity-80"},Ql={key:3,class:"flex flex-col"},eo={class:"text-zinc-700 text-base leading-relaxed bg-zinc-50 p-3 rounded-md border border-zinc-100"},to={key:1,class:"flex flex-col items-center justify-center h-full w-full text-zinc-500 py-12"},lo={class:"flex flex-col sm:flex-row gap-3 pt-6 w-full border-t border-zinc-100 mt-auto"};function oo(t,e,i,n,l,a){const r=h("Button"),f=h("Sheet");return d(),A(f,{"model-value":i.showSheet,"onUpdate:modelValue":a.handleSheetClose},{default:y(()=>[o("div",Ol,[o("div",Fl,[o("div",zl,[o("i",{class:_([a.activity.iconName||"ph-question","text-peach-500 text-3xl","ph"])},null,2),o("span",Ml,x(a.activity.title||"Activity Details"),1)]),o("button",{onClick:e[0]||(e[0]=(...g)=>a.handleSheetClose&&a.handleSheetClose(...g)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[1]||(e[1]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),a.activity&&a.activity.id?(d(),m("div",jl,[a.activity.time||a.activity.date?(d(),m("div",Gl,[e[4]||(e[4]=o("span",{class:"text-zinc-500 text-xs uppercase font-bold tracking-wider mb-1"},"Time & Date",-1)),o("div",Kl,[e[2]||(e[2]=o("i",{class:"ph ph-calendar-blank text-peach-500 text-lg"},null,-1)),e[3]||(e[3]=D()),o("span",Hl,x(a.activityDateTimeDisplay),1)])])):T("",!0),a.activity.location?(d(),m("div",Yl,[e[6]||(e[6]=o("span",{class:"text-zinc-500 text-xs uppercase font-bold tracking-wider mb-1"},"Location",-1)),o("div",ql,[e[5]||(e[5]=o("i",{class:"ph ph-map-pin text-peach-500 text-lg"},null,-1)),o("span",Zl,x(a.activity.location),1)])])):T("",!0),a.activity.cost>0||a.activity.costNote&&a.activity.costNote!==""?(d(),m("div",$l,[e[8]||(e[8]=o("span",{class:"text-zinc-500 text-xs uppercase font-bold tracking-wider mb-1"},"Budget",-1)),o("div",Wl,[e[7]||(e[7]=o("i",{class:"ph ph-currency-circle-dollar text-peach-500 text-lg"},null,-1)),o("span",Jl,x(a.formattedBudget),1),a.activity.costNote?(d(),m("span",Xl,"("+x(a.activity.costNote)+")",1)):T("",!0)])])):T("",!0),a.activity.description?(d(),m("div",Ql,[e[9]||(e[9]=o("span",{class:"text-zinc-500 text-xs uppercase font-bold tracking-wider mb-1"},"Description",-1)),o("p",eo,x(a.activity.description),1)])):T("",!0)])):(d(),m("div",to,e[10]||(e[10]=[o("i",{class:"ph ph-info text-5xl mb-4 text-zinc-300"},null,-1),o("p",{class:"text-lg text-zinc-600 font-medium"},"No activity selected to view.",-1),o("p",{class:"text-sm text-zinc-400 mt-2"},"Try clicking on an activity card.",-1)]))),o("div",lo,[s(r,{class:"w-full",onClick:a.handleEditClick,variant:"secondary",disabled:!a.activity||!a.activity.id},{default:y(()=>e[11]||(e[11]=[o("i",{class:"ph ph-pencil-simple text-base mr-2"},null,-1),D(" Edit Activity ")])),_:1},8,["onClick","disabled"]),s(r,{class:"w-full",onClick:a.handleDeleteClick,variant:"ghost",disabled:!a.activity||!a.activity.id},{default:y(()=>e[12]||(e[12]=[o("i",{class:"ph ph-trash text-base mr-2"},null,-1),D(" Delete Activity ")])),_:1},8,["onClick","disabled"])])])]),_:1},8,["model-value","onUpdate:modelValue"])}const ao=k(El,[["render",oo],["__scopeId","data-v-8d2b8bea"]]),io={components:{Sheet:P,Tag:U,Button:I,Input:O,Select:z,AdvInput:F,Dates:ae},props:{showSheet:{type:Boolean,default:!1},modelValue:{type:Object,default:()=>({name:"",type:"",location:"",numberOfRooms:null,totalCost:null,checkInTime:"",checkOutTime:"",dates:{start:"",end:""}}),required:!0}},data(){return{localConfig:{...this.modelValue}}},watch:{modelValue:{handler(t){JSON.stringify(t)!==JSON.stringify(this.localConfig)&&(this.localConfig={...t})},immediate:!0,deep:!0}},methods:{formatDateRange(t,e){if(!t||!e)return"";const i=new Date(t),n=new Date(e),l={month:"short",day:"numeric"};i.getFullYear()!==n.getFullYear()&&(l.year="numeric"),console.log(t,e);try{return`${new Intl.DateTimeFormat("en-US",l).format(i)} - ${new Intl.DateTimeFormat("en-US",l).format(n)}`}catch(a){console.error(a)}},formatCost(t){return t==null||isNaN(t)?"Enter estimated cost":`₱${new Intl.NumberFormat("en-US").format(t)}`},closeSheetViaProp(){this.$emit("update:showSheet",!1)},async save(){this.$emit("update:modelValue",this.localConfig),this.$emit("update:showSheet",!1);const e=window.location.pathname.split("/")[2],i=await fetch("/api/v1/trip/accommodations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tripId:e,accommodationData:this.localConfig})});console.log(await i.json())}}},so={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-2 py-1"},no={class:"flex items-center justify-between w-full mb-6"},ro={class:"flex flex-col gap-4 w-full"},co={class:"flex flex-col gap-4 p-1"},uo={class:"grid grid-cols-4 gap-4"},mo={class:"flex flex-col gap-4 p-1"},po={class:"flex flex-col gap-4 p-1"},ho={class:"flex flex-col gap-4 p-1"},fo={class:"flex flex-col gap-4 p-1"};function vo(t,e,i,n,l,a){const r=h("Input"),f=h("Select"),g=h("AdvInput"),p=h("Dates"),v=h("Button"),u=h("Sheet");return d(),A(u,{"model-value":i.showSheet,"onUpdate:modelValue":a.closeSheetViaProp},{default:y(()=>[o("div",so,[o("div",no,[e[10]||(e[10]=o("div",{class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},[o("i",{class:"ph ph-suitcase"}),D(),o("span",{class:"font-bold"},"Accommodations")],-1)),o("button",{onClick:e[0]||(e[0]=(...c)=>a.closeSheetViaProp&&a.closeSheetViaProp(...c)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[9]||(e[9]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",ro,[s(g,{summary:l.localConfig.name,label:"Accommodation Name",icon:"ph-article"},{default:y(()=>[o("div",co,[o("div",uo,[s(r,{modelValue:l.localConfig.name,"onUpdate:modelValue":e[1]||(e[1]=c=>l.localConfig.name=c),id:"accommodation-name",class:"col-span-3",placeholder:"Enter the name of Accommodation",label:"Name"},null,8,["modelValue"]),s(f,{modelValue:l.localConfig.type,"onUpdate:modelValue":e[2]||(e[2]=c=>l.localConfig.type=c),id:"accommodation-type",label:"Type",options:[{label:"Hotel",value:"Hotel"},{label:"AirBnb",value:"AirBnb"},{label:"Transient",value:"Transient"},{label:"Other",value:"Other"}]},null,8,["modelValue"])])])]),_:1},8,["summary"]),s(g,{summary:l.localConfig.location,label:"Location",icon:"ph-map-pin"},{default:y(()=>[o("div",mo,[s(r,{modelValue:l.localConfig.location,"onUpdate:modelValue":e[3]||(e[3]=c=>l.localConfig.location=c),id:"accommodation-location",placeholder:"Enter name of location",label:"Name"},null,8,["modelValue"])])]),_:1},8,["summary"]),s(p,{"disable-button":!0,modelValue:l.localConfig.dates,"onUpdate:modelValue":e[4]||(e[4]=c=>l.localConfig.dates=c),summary:a.formatDateRange(l.localConfig.dates.start,l.localConfig.dates.end)},null,8,["modelValue","summary"]),s(g,{summary:`${l.localConfig.numberOfRooms} Room(s)`||"Add details for rooms & guests",label:"Rooms & Guests",icon:"ph-users"},{default:y(()=>[o("div",po,[s(r,{modelValue:l.localConfig.numberOfRooms,"onUpdate:modelValue":e[5]||(e[5]=c=>l.localConfig.numberOfRooms=c),id:"number-numbers",type:"number",placeholder:"Number of Rooms",label:"Rooms",min:"1"},null,8,["modelValue"])])]),_:1},8,["summary"]),s(g,{summary:a.formatCost(l.localConfig.totalCost),label:"Cost",icon:"₱"},{default:y(()=>[o("div",ho,[s(r,{modelValue:l.localConfig.totalCost,"onUpdate:modelValue":e[6]||(e[6]=c=>l.localConfig.totalCost=c),id:"cost",type:"number",formatCommas:!0,placeholder:"Estimated total cost",label:"Total Cost",prefix:"₱",min:"0"},null,8,["modelValue"])])]),_:1},8,["summary"]),s(g,{summary:`${l.localConfig.checkInTime} | ${l.localConfig.checkOutTime}`||"Set check-in/out times",label:"Check-in/out Times",icon:"ph-clock"},{default:y(()=>[o("div",fo,[s(r,{modelValue:l.localConfig.checkInTime,"onUpdate:modelValue":e[7]||(e[7]=c=>l.localConfig.checkInTime=c),id:"check-in",type:"time",label:"Check-in Time"},null,8,["modelValue"]),s(r,{modelValue:l.localConfig.checkOutTime,"onUpdate:modelValue":e[8]||(e[8]=c=>l.localConfig.checkOutTime=c),id:"check-out",type:"time",label:"Check-out Time"},null,8,["modelValue"])])]),_:1},8,["summary"]),s(v,{onClick:a.save},{default:y(()=>e[11]||(e[11]=[D("Save Accommodations")])),_:1},8,["onClick"])])])]),_:1},8,["model-value","onUpdate:modelValue"])}const go=k(io,[["render",vo],["__scopeId","data-v-2f972fe3"]]),bo={components:{Anchor:Se,Friends:we,Sheet:P,Tag:U,Button:I,Input:O,Select:z,AdvInput:F},props:{modelValue:{type:Object,default:()=>({showSheet:!1,companions:[]}),required:!0},showSheet:{type:Boolean,default:!1},acceptedFriendships:{type:Array,default:[]},ownerUid:{type:String,default:""},uid:{type:String,default:""}},emits:["update:modelValue","companionAdded","companionRemoved"],data(){return{localCompanions:[],searchQuery:"",debouncedSearchQuery:"",timeoutId:null}},computed:{companions(){return[...this.modelValue]},filteredAcceptedFriendships(){return this.debouncedSearchQuery?this.acceptedFriendships.filter(t=>t.user2DisplayName.toLowerCase().includes(this.debouncedSearchQuery.toLowerCase())||t.user1DisplayName.toLowerCase().includes(this.debouncedSearchQuery.toLowerCase())):this.acceptedFriendships}},watch:{"modelValue.companions":{immediate:!0,handler(t){this.localCompanions=t?t.map(e=>({...e})):[],this.localCompanions.length===0&&this.addCompanionRow()}},showSheet(t){t&&this.localCompanions.length===0&&this.addCompanionRow()}},methods:{debounceInput(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.debouncedSearchQuery=this.searchQuery},600)},generateUniqueId(){return Date.now()+Math.random().toString(36).substring(2,9)},addCompanionRow(){this.localCompanions.push({id:this.generateUniqueId(),name:"",role:"Friend",age:null})},async addCompanion(t){const i=window.location.pathname.split("/")[2];await fetch("/api/v1/trip/companions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companion:t,tripId:i})}),this.$emit("companionAdded")},async removeCompanion(t){const i=window.location.pathname.split("/")[2],n=t.uid;await fetch(`/api/v1/trip/companions?tripId=${i}&companionUid=${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),this.$emit("companionRemoved")},removeCompanionRow(t){this.localCompanions=this.localCompanions.filter(e=>e.id!==t),this.localCompanions.length===0&&this.addCompanionRow()},getCompanionSummary(t){if(t.name){let e=t.name;return t.role&&t.role!=="Other"&&(e+=` (${t.role})`),t.age&&(e+=`, ${t.age} y.o.`),e}return"New Companion"},saveCompanions(){const t=this.localCompanions.filter(e=>e.name.trim()!=="");this.$emit("update:modelValue",{...this.modelValue,companions:t,showSheet:!1})}},mounted(){this.localCompanions.length===0&&this.addCompanionRow()}},yo={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-2 py-1"},wo={class:"flex items-center justify-between w-full mb-6"},So={class:"flex flex-col w-full gap-10"},xo={class:"flex flex-col gap-4 w-full"},Co={class:"flex flex-col gap-2"},_o={class:_(["text-xl transition rounded-full flex","bg-none justify-center items-center","bg-zinc-200 aspect-square border-2 border-zinc-300","shadow-secondary-sm","border-secondary-sm","overflow-hidden h-12 w-12"])},To=["src"],Do={key:1,class:"ph ph-user"},Ao={class:"flex flex-col gap-0 grow"},Vo={key:0,class:"font-semibold"},ko={key:1,class:"font-semibold"},Ro={class:"flex flex-col gap-4"},No={class:"flex gap-3 self-start items-center justify-start"},Io={class:_(["text-xl transition rounded-full flex","bg-none justify-center items-center","bg-zinc-200 aspect-square border-2 border-zinc-300","shadow-secondary-sm","border-secondary-sm","overflow-hidden h-12 w-12"])},Bo=["src"],Uo={key:1,class:"ph ph-user"},Po={class:"flex flex-col gap-0 grow"},Lo={key:0,class:"font-semibold"},Eo={key:1,class:"font-semibold"},Oo={key:0,class:"text-sm"},Fo={class:"flex gap-3 self-start items-center justify-start"},zo={class:_(["text-xl transition rounded-full flex","bg-none justify-center items-center","bg-zinc-200 aspect-square border-2 border-zinc-300","shadow-secondary-sm","border-secondary-sm","overflow-hidden h-12 w-12"])},Mo=["src"],jo={key:1,class:"ph ph-user"},Go={class:"flex flex-col gap-0 grow"},Ko={key:0,class:"font-semibold"},Ho={key:1,class:"font-semibold"},Yo={key:0,class:"text-sm"},qo={key:1,class:"flex flex-col items-center justify-center gap-1 text-zinc-500 py-10"};function Zo(t,e,i,n,l,a){const r=h("Tag"),f=h("Input"),g=h("Sheet");return d(),A(g,{"model-value":i.showSheet,"onUpdate:modelValue":e[2]||(e[2]=p=>t.$emit("update:showSheet",!1))},{default:y(()=>[o("div",yo,[o("div",wo,[e[4]||(e[4]=o("div",{class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},[o("i",{class:"ph ph-users"}),D(),o("span",{class:"font-bold"},"Trip Companions")],-1)),o("button",{onClick:e[0]||(e[0]=p=>t.$emit("update:showSheet",!1)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[3]||(e[3]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",So,[o("div",xo,[e[5]||(e[5]=o("span",{class:"text-xl font-semibold"},"Current Companions",-1)),o("div",Co,[(d(!0),m(R,null,N(a.companions,(p,v)=>(d(),m("div",{class:_(["fadeIn p-3 rounded-3xl gap-3 shadow-secondary-md border-secondary-xs flex flex-row items-center justify-start",`fadeIn-${v}`])},[o("div",_o,[p.photoURL?(d(),m("img",{key:0,src:p.photoURL,alt:""},null,8,To)):(d(),m("i",Do))]),o("div",Ao,[p.displayName?(d(),m("span",Vo,x(p.displayName),1)):p.email?(d(),m("span",ko,x(p.email),1)):T("",!0)]),i.ownerUid!==p.uid&&(i.uid===i.ownerUid||i.uid===p.uid)?(d(),A(r,{key:0,onClick:u=>a.removeCompanion(p),mode:"button",label:"Remove",icon:"ph ph-x"},null,8,["onClick"])):i.ownerUid===p.uid?(d(),A(r,{key:1,label:"Organizer",icon:"ph ph-crown",variant:"yellow"})):T("",!0)],2))),256))])]),o("div",Ro,[e[7]||(e[7]=o("div",{class:"text-2xl gap-2 font-bold flex items-center"},[o("i",{class:"ph ph-users"}),o("span",null,"My Friends")],-1)),s(f,{id:"friends-search","prefix-icon":"ph ph-magnifying-glass",placeholder:"Search friends",modelValue:l.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=p=>l.searchQuery=p),onInput:a.debounceInput},null,8,["modelValue","onInput"]),e[8]||(e[8]=o("span",null,"Your Friends",-1)),a.filteredAcceptedFriendships.length>0?(d(!0),m(R,{key:0},N(a.filteredAcceptedFriendships,(p,v)=>(d(),m(R,null,[p.user1Uid!==i.uid?(d(),m("div",{key:0,class:_(["fadeIn p-3 rounded-3xl gap-3 shadow-secondary-md border-secondary-xs flex flex-col md:flex-row items-center justify-start md:justify-between",`fadeIn-${v}`])},[o("div",No,[o("div",Io,[p.user1PhotoURL?(d(),m("img",{key:0,src:p.user1PhotoURL,alt:""},null,8,Bo)):(d(),m("i",Uo))]),o("div",Po,[p.user1DisplayName?(d(),m("span",Lo,x(p.user1DisplayName),1)):p.user1Email?(d(),m("span",Eo,x(p.user1Email),1)):T("",!0)])]),a.companions.map(u=>u.uid).includes(p.user1Uid)?(d(),m("span",Oo,"Already Added")):(d(),A(r,{key:1,onClick:u=>a.addCompanion({uid:p.user1Uid,displayName:p.user1DisplayName,email:p.user1Email,photoURL:p.user1PhotoURL,role:"guest",status:"accepted"}),mode:"button",label:"Add Companion",icon:"ph ph-user-plus"},null,8,["onClick"]))],2)):(d(),m("div",{key:1,class:_(["fadeIn p-3 rounded-3xl gap-3 shadow-secondary-md border-secondary-xs flex flex-col md:flex-row items-center justify-start md:justify-between",`fadeIn-${v}`])},[o("div",Fo,[o("div",zo,[p.user2PhotoURL?(d(),m("img",{key:0,src:p.user2PhotoURL,alt:""},null,8,Mo)):(d(),m("i",jo))]),o("div",Go,[p.user2DisplayName?(d(),m("span",Ko,x(p.user2DisplayName),1)):p.user2Email?(d(),m("span",Ho,x(p.user2Email),1)):T("",!0)])]),a.companions.map(u=>u.uid).includes(p.user2Uid)?(d(),m("span",Yo,"Already Added")):(d(),A(r,{key:1,onClick:u=>a.addCompanion({uid:p.user2Uid,displayName:p.user2DisplayName,email:p.user2Email,photoURL:p.user2PhotoURL,role:"guest",status:"accepted"}),mode:"button",label:"Add Companion",icon:"ph ph-user-plus"},null,8,["onClick"]))],2))],64))),256)):(d(),m("div",qo,e[6]||(e[6]=[o("i",{class:"ph ph-users text-3xl"},null,-1),o("span",null,"You have no friends",-1)])))])])])]),_:1},8,["model-value"])}const $o=k(bo,[["render",Zo],["__scopeId","data-v-9aca97df"]]),Wo={components:{Sheet:P,Tag:U,Button:I,Input:O,Select:z,AdvInput:F},props:{showSheet:{type:Boolean,default:!1},modelValue:{type:Object,default:()=>({showSheet:!1,totalBudget:null,currency:"PHP",categories:[]}),required:!0}},emits:["update:modelValue"],data(){return{localBudget:{totalBudget:null,currency:"PHP",categories:[]}}},computed:{totalBudgetSummary(){return this.localBudget.totalBudget>0?new Intl.NumberFormat(this.getLocale(),{style:"currency",currency:this.localBudget.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.localBudget.totalBudget):"Set your overall trip budget"},totalBreakdown(){return this.localBudget.categories.reduce((t,e)=>t+e.amount,0)}},watch:{modelValue:{immediate:!0,deep:!0,handler(t){this.localBudget={totalBudget:t.totalBudget||null,currency:t.currency||"PHP",categories:t.categories?t.categories.map(e=>({...e})):[]},this.showSheet&&this.localBudget.categories.length===0&&this.addCategoryRow()}},showSheet(t){t&&this.localBudget.categories.length===0&&this.addCategoryRow()}},methods:{getLocale(){return navigator.language||"en-US"},generateUniqueId(){return Date.now()+Math.random().toString(36).substring(2,9)},addCategoryRow(){this.localBudget.categories.push({tempId:this.generateUniqueId(),name:"",amount:0})},async removeCategoryRow(t,e){this.localBudget.categories=this.localBudget.categories.filter(a=>a.id?a.id!==e:a.tempId!==t),this.localBudget.categories.length===0&&this.addCategoryRow();const n=window.location.pathname.split("/")[2],l=await fetch(`/api/v1/trip/budget?tripId=${n}&budgetId=${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!l.ok){const a=await l.json();console.error(`ERROR deleting budget: ${a.message}`)}},getCategorySummary(t){try{return t.name&&t.amount>0?`${new Intl.NumberFormat(this.getLocale(),{style:"currency",currency:this.localBudget.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(t.amount)}`:t.name?t.name:"New Category"}catch(e){console.log(e)}},formatCurrency(t){const e=new Intl.NumberFormat((this.getLocale(),{style:"currency",currency:this.localBudget.currency,minimumFractionDigits:2,maximumFractionDigits:2}));return`${this.getCurrencySymbol(this.localBudget.currency)} ${e.format(t)}`},getCurrencySymbol(t){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t,currencyDisplay:"symbol"}).format(0).replace(/[0-9.,\s-]/g,"")}catch{return t}},currencyOptions(){return[{label:"AED",value:"AED"},{label:"AFN",value:"AFN"},{label:"ALL",value:"ALL"},{label:"AMD",value:"AMD"},{label:"ANG",value:"ANG"},{label:"AOA",value:"AOA"},{label:"ARS",value:"ARS"},{label:"AUD",value:"AUD"},{label:"AWG",value:"AWG"},{label:"AZN",value:"AZN"},{label:"BAM",value:"BAM"},{label:"BBD",value:"BBD"},{label:"BDT",value:"BDT"},{label:"BGN",value:"BGN"},{label:"BHD",value:"BHD"},{label:"BIF",value:"BIF"},{label:"BMD",value:"BMD"},{label:"BND",value:"BND"},{label:"BOB",value:"BOB"},{label:"BOV",value:"BOV"},{label:"BRL",value:"BRL"},{label:"BSD",value:"BSD"},{label:"BTN",value:"BTN"},{label:"BWP",value:"BWP"},{label:"BYN",value:"BYN"},{label:"BZD",value:"BZD"},{label:"CAD",value:"CAD"},{label:"CDF",value:"CDF"},{label:"CHE",value:"CHE"},{label:"CHF",value:"CHF"},{label:"CHW",value:"CHW"},{label:"CLF",value:"CLF"},{label:"CLP",value:"CLP"},{label:"CNY",value:"CNY"},{label:"COP",value:"COP"},{label:"COU",value:"COU"},{label:"CRC",value:"CRC"},{label:"CUC",value:"CUC"},{label:"CUP",value:"CUP"},{label:"CVE",value:"CVE"},{label:"CZK",value:"CZK"},{label:"DJF",value:"DJF"},{label:"DKK",value:"DKK"},{label:"DOP",value:"DOP"},{label:"DZD",value:"DZD"},{label:"EGP",value:"EGP"},{label:"ERN",value:"ERN"},{label:"ETB",value:"ETB"},{label:"EUR",value:"EUR"},{label:"FJD",value:"FJD"},{label:"FKP",value:"FKP"},{label:"GBP",value:"GBP"},{label:"GEL",value:"GEL"},{label:"GHS",value:"GHS"},{label:"GIP",value:"GIP"},{label:"GMD",value:"GMD"},{label:"GNF",value:"GNF"},{label:"GTQ",value:"GTQ"},{label:"GYD",value:"GYD"},{label:"HKD",value:"HKD"},{label:"HNL",value:"HNL"},{label:"HTG",value:"HTG"},{label:"HUF",value:"HUF"},{label:"IDR",value:"IDR"},{label:"ILS",value:"ILS"},{label:"INR",value:"INR"},{label:"IQD",value:"IQD"},{label:"IRR",value:"IRR"},{label:"ISK",value:"ISK"},{label:"JMD",value:"JMD"},{label:"JOD",value:"JOD"},{label:"JPY",value:"JPY"},{label:"KES",value:"KES"},{label:"KGS",value:"KGS"},{label:"KHR",value:"KHR"},{label:"KMF",value:"KMF"},{label:"KPW",value:"KPW"},{label:"KRW",value:"KRW"},{label:"KWD",value:"KWD"},{label:"KYD",value:"KYD"},{label:"KZT",value:"KZT"},{label:"LAK",value:"LAK"},{label:"LBP",value:"LBP"},{label:"LKR",value:"LKR"},{label:"LRD",value:"LRD"},{label:"LSL",value:"LSL"},{label:"LYD",value:"LYD"},{label:"MAD",value:"MAD"},{label:"MDL",value:"MDL"},{label:"MGA",value:"MGA"},{label:"MKD",value:"MKD"},{label:"MMK",value:"MMK"},{label:"MNT",value:"MNT"},{label:"MOP",value:"MOP"},{label:"MRU",value:"MRU"},{label:"MUR",value:"MUR"},{label:"MVR",value:"MVR"},{label:"MWK",value:"MWK"},{label:"MXN",value:"MXN"},{label:"MYR",value:"MYR"},{label:"MZN",value:"MZN"},{label:"NAD",value:"NAD"},{label:"NGN",value:"NGN"},{label:"NIO",value:"NIO"},{label:"NOK",value:"NOK"},{label:"NPR",value:"NPR"},{label:"NZD",value:"NZD"},{label:"OMR",value:"OMR"},{label:"PAB",value:"PAB"},{label:"PEN",value:"PEN"},{label:"PGK",value:"PGK"},{label:"PHP",value:"PHP"},{label:"PKR",value:"PKR"},{label:"PLN",value:"PLN"},{label:"PYG",value:"PYG"},{label:"QAR",value:"QAR"},{label:"RON",value:"RON"},{label:"RSD",value:"RSD"},{label:"RUB",value:"RUB"},{label:"RWF",value:"RWF"},{label:"SAR",value:"SAR"},{label:"SBD",value:"SBD"},{label:"SCR",value:"SCR"},{label:"SDG",value:"SDG"},{label:"SEK",value:"SEK"},{label:"SGD",value:"SGD"},{label:"SHP",value:"SHP"},{label:"SLE",value:"SLE"},{label:"SOS",value:"SOS"},{label:"SRD",value:"SRD"},{label:"SSP",value:"SSP"},{label:"STN",value:"STN"},{label:"SVC",value:"SVC"},{label:"SYP",value:"SYP"},{label:"SZL",value:"SZL"},{label:"THB",value:"THB"},{label:"TJS",value:"TJS"},{label:"TMT",value:"TMT"},{label:"TND",value:"TND"},{label:"TOP",value:"TOP"},{label:"TRY",value:"TRY"},{label:"TTD",value:"TTD"},{label:"TWD",value:"TWD"},{label:"TZS",value:"TZS"},{label:"UAH",value:"UAH"},{label:"UGX",value:"UGX"},{label:"USD",value:"USD"},{label:"UYU",value:"UYU"},{label:"UZS",value:"UZS"},{label:"VES",value:"VES"},{label:"VND",value:"VND"},{label:"VUV",value:"VUV"},{label:"WST",value:"WST"},{label:"XAF",value:"XAF"},{label:"XCD",value:"XCD"},{label:"XDR",value:"XDR"},{label:"XOF",value:"XOF"},{label:"XPF",value:"XPF"},{label:"YER",value:"YER"},{label:"ZAR",value:"ZAR"},{label:"ZMW",value:"ZMW"},{label:"ZWG",value:"ZWG"}]},async saveBudget(){const t=this.localBudget.categories.filter(l=>l.name.trim()!==""||l.amount>0);this.$emit("update:modelValue",{...this.modelValue,totalBudget:this.localBudget.totalBudget,currency:this.localBudget.currency,categories:t}),this.$emit("update:showSheet",!1);const i=window.location.pathname.split("/")[2];(await fetch("/api/v1/trip/budget",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tripId:i,overallBudget:this.localBudget.totalBudget,budgetBreakdown:t})})).ok||console.error("ERROR saving budget")},closeSheet(){this.$emit("update:showSheet",!1)}},mounted(){this.showSheet&&this.localBudget.categories.length===0&&this.addCategoryRow()}},Jo={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-2 py-1"},Xo={class:"flex items-center justify-between w-full mb-6"},Qo={class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},ea={class:"flex flex-col gap-4 w-full mb-6"},ta={class:"flex flex-col gap-4 p-1"},la={class:"flex-grow w-full pr-2 flex flex-col gap-3 custom-scrollbar"},oa={class:"flex flex-row items-center justify-between"},aa={class:"font-normal! text-xs text-zinc-400 flex flex-col gap-0"},ia={key:0},sa={key:1},na={class:"flex flex-col gap-4 p-1"},ra={class:"flex justify-end mt-2"},da={key:0,class:"flex flex-col items-center justify-center text-zinc-500 p-8 border border-zinc-200 rounded-lg"},ca={class:"w-full mt-6"};function ua(t,e,i,n,l,a){const r=h("Tag"),f=h("Input"),g=h("Select"),p=h("AdvInput"),v=h("Button"),u=h("Sheet");return d(),A(u,{"model-value":i.showSheet,"onUpdate:modelValue":a.closeSheet},{default:y(()=>[o("div",Jo,[o("div",Xo,[o("div",Qo,[e[3]||(e[3]=o("i",{class:"ph ph-wallet"},null,-1)),e[4]||(e[4]=D()),e[5]||(e[5]=o("span",{class:"font-bold"},"Trip Budget",-1)),s(r,{label:"+ Add Category",mode:"button",onClick:a.addCategoryRow},null,8,["onClick"])]),o("button",{onClick:e[0]||(e[0]=(...c)=>a.closeSheet&&a.closeSheet(...c)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[6]||(e[6]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",ea,[s(p,{summary:a.totalBudgetSummary,label:"Overall Budget",icon:`${a.getCurrencySymbol(l.localBudget.currency)}`},{default:y(()=>[o("div",ta,[s(f,{"format-commas":!0,id:"totalBudget",modelValue:l.localBudget.totalBudget,"onUpdate:modelValue":e[1]||(e[1]=c=>l.localBudget.totalBudget=c),modelModifiers:{number:!0},type:"number",placeholder:"Enter total trip budget",label:"Amount",prefix:l.localBudget.currency,min:"0"},null,8,["modelValue","prefix"]),s(g,{modelValue:l.localBudget.currency,"onUpdate:modelValue":e[2]||(e[2]=c=>l.localBudget.currency=c),id:"budget-currency",label:"Currency",optionLabel:"label",optionValue:"value",options:a.currencyOptions()},null,8,["modelValue","options"])])]),_:1},8,["summary","icon"])]),o("div",la,[o("div",oa,[e[7]||(e[7]=o("h3",{class:"text-lg font-semibold text-zinc-700 mt-2 mb-2"},"Budget Breakdown ",-1)),o("div",aa,[o("span",null,"Total "+x(a.formatCurrency(a.totalBreakdown)),1),a.totalBreakdown-l.localBudget.totalBudget>0?(d(),m("div",ia,[o("span",null,x(a.formatCurrency(a.totalBreakdown-l.localBudget.totalBudget))+" over budget",1)])):(d(),m("div",sa,[o("span",null,x(a.formatCurrency(l.localBudget.totalBudget-a.totalBreakdown))+" below budget",1)]))])]),(d(!0),m(R,null,N(l.localBudget.categories,(c,w)=>(d(),A(p,{key:c.id,summary:a.getCategorySummary(c),label:`${c.name||"New Category"}`,icon:"ph-tag",onRemove:S=>a.removeCategoryRow(c.id),removable:""},{default:y(()=>[o("div",na,[s(f,{id:`category-name-${w}`,modelValue:c.name,"onUpdate:modelValue":S=>c.name=S,placeholder:"e.g., Flights, Food, Activities",label:"Category Name"},null,8,["id","modelValue","onUpdate:modelValue"]),s(f,{id:`category-amount-${w}`,modelValue:c.amount,"onUpdate:modelValue":S=>c.amount=S,modelModifiers:{number:!0},type:"number",placeholder:"Budget for this category",label:"Amount",prefix:l.localBudget.currency},null,8,["id","modelValue","onUpdate:modelValue","prefix"]),o("div",ra,[l.localBudget.categories.length>1?(d(),A(v,{key:0,onClick:S=>a.removeCategoryRow(c.tempId,c.id),variant:"ghost"},{default:y(()=>e[8]||(e[8]=[D(" Delete Category ")])),_:2},1032,["onClick"])):T("",!0)])])]),_:2},1032,["summary","label","onRemove"]))),128)),l.localBudget.categories.length===0?(d(),m("div",da,[e[10]||(e[10]=o("i",{class:"ph ph-tag-simple text-4xl mb-2"},null,-1)),e[11]||(e[11]=o("p",{class:"text-center"},"No budget categories added yet. Click '+ Add Category' to start categorizing your spending!",-1)),s(v,{class:"mt-4",onClick:a.addCategoryRow},{default:y(()=>e[9]||(e[9]=[D("Add First Category")])),_:1},8,["onClick"])])):T("",!0)]),o("div",ca,[s(v,{class:"w-full",onClick:a.saveBudget},{default:y(()=>e[12]||(e[12]=[D("Save Budget")])),_:1},8,["onClick"])])])]),_:1},8,["model-value","onUpdate:modelValue"])}const ma=k(Wo,[["render",ua],["__scopeId","data-v-72142413"]]),pa={components:{Sheet:P,Tag:U,Button:I,Input:O,Select:z,AdvInput:F},props:{modelValue:{type:Object,default:()=>({showSheet:!1,transports:[]}),required:!0},showSheet:{type:Boolean,default:!1}},emits:["update:modelValue","update:showSheet"],data(){return{localTransports:[],modeIcons:{Flight:"ph-airplane",Bus:"ph-bus",Train:"ph-train-simple",Car:"ph-car",Ferry:"ph-boat","Taxi/Ride-share":"ph-taxi",Other:"ph-question"}}},watch:{"modelValue.transports":{immediate:!0,deep:!0,handler(t){this.localTransports=t?t.map(e=>({...e})):[],this.showSheet&&this.localTransports.length===0&&this.addTransportRow()}},showSheet(t){t&&this.localTransports.length===0&&this.addTransportRow()}},methods:{getLocale(){return navigator.language||"en-US"},generateUniqueId(){return Date.now()+Math.random().toString(36).substring(2,9)},addTransportRow(){this.localTransports.push({id:this.generateUniqueId(),mode:"",departureLocation:"",departureDate:"",departureTime:"",arrivalLocation:"",arrivalDate:"",arrivalTime:"",bookingRef:"",seatNumber:"",cost:0,currency:"PHP",notes:""})},removeTransportRow(t){this.localTransports=this.localTransports.filter(e=>e.id!==t),this.localTransports.length===0&&this.addTransportRow()},getTransportSummary(t){const e=[];if(t.mode&&e.push(t.mode),t.departureLocation&&e.push(`from ${t.departureLocation}`),t.arrivalLocation&&e.push(`to ${t.arrivalLocation}`),t.departureDate&&e.push(`on ${t.departureDate}`),t.cost>0){const i=new Intl.NumberFormat(this.getLocale(),{style:"currency",currency:t.currency,minimumFractionDigits:0,maximumFractionDigits:0});e.push(`(${i.format(t.cost)})`)}return e.length>0?e.join(" "):"New Transportation Segment"},getTransportIcon(t){return this.modeIcons[t]||"ph-question"},saveTransports(){const t=this.localTransports.filter(e=>e.mode||e.departureLocation.trim()!==""||e.arrivalLocation.trim()!==""||e.cost>0);this.$emit("update:modelValue",{...this.modelValue,transports:t,showSheet:!1})}},mounted(){this.showSheet&&this.localTransports.length===0&&this.addTransportRow()}},ha={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-1 py-2"},fa={class:"flex items-center justify-between w-full mb-6"},va={class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},ga={class:"flex-grow w-full pr-2 flex flex-col gap-3 custom-scrollbar"},ba={class:"flex flex-col gap-4 p-1"},ya={class:"grid grid-cols-2 gap-4"},wa={class:"grid grid-cols-2 gap-4"},Sa={class:"grid grid-cols-2 gap-4"},xa={class:"flex justify-end mt-2"},Ca={key:0,class:"flex flex-col items-center justify-center text-zinc-500 p-8 border border-zinc-200 rounded-lg"},_a={class:"w-full mt-6"};function Ta(t,e,i,n,l,a){const r=h("Tag"),f=h("Select"),g=h("Input"),p=h("Button"),v=h("AdvInput"),u=h("Sheet");return d(),A(u,{"model-value":i.showSheet,"onUpdate:modelValue":e[1]||(e[1]=c=>t.$emit("update:showSheet",!1))},{default:y(()=>[o("div",ha,[o("div",fa,[o("div",va,[e[2]||(e[2]=o("i",{class:"ph ph-bus"},null,-1)),e[3]||(e[3]=D()),e[4]||(e[4]=o("span",{class:"font-bold"},"Transportation",-1)),s(r,{label:"+ Add Segment",mode:"button",onClick:a.addTransportRow},null,8,["onClick"])]),o("button",{onClick:e[0]||(e[0]=c=>t.$emit("update:showSheet",!1)),class:"text-zinc-500 hover:text-zinc-700 transition"},e[5]||(e[5]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",ga,[(d(!0),m(R,null,N(l.localTransports,(c,w)=>(d(),A(v,{key:c.id,summary:a.getTransportSummary(c),label:`Segment ${w+1}`,icon:a.getTransportIcon(c.mode),onRemove:S=>a.removeTransportRow(c.id),removable:""},{default:y(()=>[o("div",ba,[s(f,{modelValue:c.mode,"onUpdate:modelValue":S=>c.mode=S,id:`transport-mode-${c.id}`,label:"Mode of Transport",placeholder:"Enter/Select Mode",options:[{label:"Flight",value:"Flight"},{label:"Bus",value:"Bus"},{label:"Train",value:"Train"},{label:"Car",value:"Car"},{label:"Ferry",value:"Ferry"},{label:"Taxi/Ride-share",value:"Taxi/Ride-share"},{label:"Other",value:"Other"}]},null,8,["modelValue","onUpdate:modelValue","id"]),s(g,{id:w+"location-departure",modelValue:c.departureLocation,"onUpdate:modelValue":S=>c.departureLocation=S,placeholder:"e.g., NAIA Terminal 3",label:"Departure Location"},null,8,["id","modelValue","onUpdate:modelValue"]),o("div",ya,[s(g,{id:w+"date-departure",modelValue:c.departureDate,"onUpdate:modelValue":S=>c.departureDate=S,type:"date",label:"Departure Date"},null,8,["id","modelValue","onUpdate:modelValue"]),s(g,{id:w+"time-departure",modelValue:c.departureTime,"onUpdate:modelValue":S=>c.departureTime=S,type:"time",label:"Departure Time"},null,8,["id","modelValue","onUpdate:modelValue"])]),s(g,{id:w+"location-arrival",modelValue:c.arrivalLocation,"onUpdate:modelValue":S=>c.arrivalLocation=S,placeholder:"e.g., Baguio City Terminal",label:"Arrival Location"},null,8,["id","modelValue","onUpdate:modelValue"]),o("div",wa,[s(g,{id:w+"date-arrival",modelValue:c.arrivalDate,"onUpdate:modelValue":S=>c.arrivalDate=S,type:"date",label:"Arrival Date (Optional)"},null,8,["id","modelValue","onUpdate:modelValue"]),s(g,{id:w+"time-arrival",modelValue:c.arrivalTime,"onUpdate:modelValue":S=>c.arrivalTime=S,type:"time",label:"Arrival Time (Optional)"},null,8,["id","modelValue","onUpdate:modelValue"])]),s(g,{id:w+"booking-reference",modelValue:c.bookingRef,"onUpdate:modelValue":S=>c.bookingRef=S,placeholder:"e.g., ABC123DEF",label:"Booking Reference (Optional)"},null,8,["id","modelValue","onUpdate:modelValue"]),s(g,{id:w+"seat-number",modelValue:c.seatNumber,"onUpdate:modelValue":S=>c.seatNumber=S,placeholder:"e.g., 12A",label:"Seat/Vehicle Number (Optional)"},null,8,["id","modelValue","onUpdate:modelValue"]),o("div",Sa,[s(g,{id:w+"cost",modelValue:c.cost,"onUpdate:modelValue":S=>c.cost=S,modelModifiers:{number:!0},type:"number",placeholder:"Cost",label:"Cost",prefix:"₱",min:"0"},null,8,["id","modelValue","onUpdate:modelValue"]),s(f,{modelValue:c.currency,"onUpdate:modelValue":S=>c.currency=S,id:`transport-currency-${c.id}`,label:"Currency",options:[{label:"PHP",value:"PHP"},{label:"USD",value:"USD"},{label:"EUR",value:"EUR"}]},null,8,["modelValue","onUpdate:modelValue","id"])]),s(g,{id:w+"notes",modelValue:c.notes,"onUpdate:modelValue":S=>c.notes=S,placeholder:"Any specific notes for this segment...",label:"Notes (Optional)"},null,8,["id","modelValue","onUpdate:modelValue"]),o("div",xa,[l.localTransports.length>1?(d(),A(p,{key:0,onClick:S=>a.removeTransportRow(c.id),variant:"ghost"},{default:y(()=>e[6]||(e[6]=[D(" Delete Segment ")])),_:2},1032,["onClick"])):T("",!0)])])]),_:2},1032,["summary","label","icon","onRemove"]))),128)),l.localTransports.length===0?(d(),m("div",Ca,[e[8]||(e[8]=o("i",{class:"ph ph-train-simple text-4xl mb-2"},null,-1)),e[9]||(e[9]=o("p",{class:"text-center"},"No transportation segments added yet. Click '+ Add Segment' to plan your journey!",-1)),s(p,{class:"mt-4",onClick:a.addTransportRow},{default:y(()=>e[7]||(e[7]=[D("Add First Segment")])),_:1},8,["onClick"])])):T("",!0)]),o("div",_a,[s(p,{class:"w-full",onClick:a.saveTransports},{default:y(()=>e[10]||(e[10]=[D("Save Transportation")])),_:1},8,["onClick"])])])]),_:1},8,["model-value"])}const Da=k(pa,[["render",Ta],["__scopeId","data-v-76ca35d2"]]),Aa={components:{Sheet:P,Tag:U,Button:I,Input:O,Select:z,AdvInput:F},props:{modelValue:{type:Object,default:()=>({showSheet:!1,roles:[],companions:[],selfName:"Me"}),required:!0}},emits:["update:modelValue"],data(){return{localRoles:[]}},computed:{showSheet(){return this.modelValue.showSheet},assigneeOptions(){const t=[{label:"Unassigned",value:null}];return t.push({label:this.modelValue.selfName||"Me",value:"self"}),this.modelValue.companions&&Array.isArray(this.modelValue.companions)&&this.modelValue.companions.forEach(e=>{e.id&&e.name&&t.push({label:e.name,value:e.id})}),t}},watch:{"modelValue.roles":{immediate:!0,deep:!0,handler(t){this.localRoles=t?t.map(e=>({...e})):[],this.showSheet&&this.localRoles.length===0&&this.addRoleRow()}},showSheet(t){t&&this.localRoles.length===0&&this.addRoleRow()}},methods:{generateUniqueId(){return Date.now()+Math.random().toString(36).substring(2,9)},addRoleRow(){this.localRoles.push({id:this.generateUniqueId(),name:"",assigneeId:null,notes:""})},removeRoleRow(t){this.localRoles=this.localRoles.filter(e=>e.id!==t),this.localRoles.length===0&&this.addRoleRow()},getRoleSummary(t){const e=this.assigneeOptions.find(i=>i.value===t.assigneeId)?.label||"Unassigned";return t.name?`${t.name} (${e})`:`New Role (${e})`},saveRoles(){const t=this.localRoles.filter(e=>e.name.trim()!=="");this.$emit("update:modelValue",{...this.modelValue,roles:t,showSheet:!1})}},mounted(){this.showSheet&&this.localRoles.length===0&&this.addRoleRow()}},Va={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-1 py-2"},ka={class:"flex items-center justify-between w-full mb-6"},Ra={class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},Na={class:"flex-grow w-full pr-2 flex flex-col gap-3 custom-scrollbar"},Ia={class:"flex flex-col gap-4 p-1"},Ba={class:"flex justify-end mt-2"},Ua={key:0,class:"flex flex-col items-center justify-center text-zinc-500 p-8 border border-zinc-200 rounded-lg"},Pa={class:"w-full mt-6"};function La(t,e,i,n,l,a){const r=h("Tag"),f=h("Input"),g=h("Select"),p=h("Button"),v=h("AdvInput"),u=h("Sheet");return d(),A(u,{"model-value":a.showSheet,"onUpdate:modelValue":e[1]||(e[1]=c=>t.$emit("update:modelValue",c))},{default:y(()=>[o("div",Va,[o("div",ka,[o("div",Ra,[e[2]||(e[2]=o("i",{class:"ph ph-hand-palm"},null,-1)),e[3]||(e[3]=D()),e[4]||(e[4]=o("span",{class:"font-bold"},"Trip Roles",-1)),s(r,{label:"+ Add Role",mode:"button",onClick:a.addRoleRow},null,8,["onClick"])]),o("button",{onClick:e[0]||(e[0]=c=>t.$emit("update:modelValue",{...i.modelValue,showSheet:!1})),class:"text-zinc-500 hover:text-zinc-700 transition"},e[5]||(e[5]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",Na,[(d(!0),m(R,null,N(l.localRoles,(c,w)=>(d(),A(v,{key:c.id,summary:a.getRoleSummary(c),label:`Role ${w+1}`,icon:"ph-user-list",onRemove:S=>a.removeRoleRow(c.id),removable:""},{default:y(()=>[o("div",Ia,[s(f,{id:w+"name",modelValue:c.name,"onUpdate:modelValue":S=>c.name=S,placeholder:"e.g., Driver, Photographer, Payer",label:"Role Name"},null,8,["id","modelValue","onUpdate:modelValue"]),s(g,{modelValue:c.assigneeId,"onUpdate:modelValue":S=>c.assigneeId=S,id:`role-assignee-${c.id}`,label:"Assigned To",options:a.assigneeOptions},null,8,["modelValue","onUpdate:modelValue","id","options"]),s(f,{id:w+"notes",modelValue:c.notes,"onUpdate:modelValue":S=>c.notes=S,placeholder:"e.g., responsible for navigation, handles all payments",label:"Notes (Optional)"},null,8,["id","modelValue","onUpdate:modelValue"]),o("div",Ba,[l.localRoles.length>1?(d(),A(p,{key:0,onClick:S=>a.removeRoleRow(c.id),variant:"ghost"},{default:y(()=>e[6]||(e[6]=[D(" Delete Role ")])),_:2},1032,["onClick"])):T("",!0)])])]),_:2},1032,["summary","label","onRemove"]))),128)),l.localRoles.length===0?(d(),m("div",Ua,[e[8]||(e[8]=o("i",{class:"ph ph-users-three text-4xl mb-2"},null,-1)),e[9]||(e[9]=o("p",{class:"text-center"},"No roles defined yet. Click '+ Add Role' to assign responsibilities!",-1)),s(p,{class:"mt-4",onClick:a.addRoleRow},{default:y(()=>e[7]||(e[7]=[D("Add First Role")])),_:1},8,["onClick"])])):T("",!0)]),o("div",Pa,[s(p,{class:"w-full",onClick:a.saveRoles},{default:y(()=>e[10]||(e[10]=[D("Save Roles")])),_:1},8,["onClick"])])])]),_:1},8,["model-value"])}const Ea=k(Aa,[["render",La],["__scopeId","data-v-3e39ef05"]]),Oa={components:{Sheet:P,Tag:U,Button:I,Input:O,AdvInput:F},props:{modelValue:{type:Object,default:()=>({showSheet:!1,day:"",note:null}),required:!0}},emits:["update:modelValue","note-saved","note-deleted"],data(){return{localNote:this.getInitialNoteState()}},computed:{showSheet(){return this.modelValue.showSheet},formattedDate(){if(this.modelValue.day)try{return new Date(this.modelValue.day+"T00:00:00").toLocaleDateString(navigator.language,{year:"numeric",month:"long",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),this.modelValue.day}return"N/A"}},watch:{"modelValue.showSheet":{immediate:!0,handler(t){t&&(this.modelValue.note?this.localNote={...this.modelValue.note}:this.localNote=this.getInitialNoteState())}}},methods:{generateUniqueId(){return Date.now()+Math.random().toString(36).substring(2,9)},getInitialNoteState(){return{id:this.generateUniqueId(),day:this.modelValue.day,title:"",content:""}},cancelNote(){this.$emit("update:modelValue",{...this.modelValue,showSheet:!1})},saveNote(){if(!this.localNote.title.trim()){alert("Note title is required!");return}this.localNote.day=this.modelValue.day,this.$emit("note-saved",this.localNote),this.$emit("update:modelValue",{...this.modelValue,showSheet:!1})},deleteNote(){confirm("Are you sure you want to delete this note?")&&(this.$emit("note-deleted",this.localNote.id),this.$emit("update:modelValue",{...this.modelValue,showSheet:!1}))}}},Fa={class:"flex flex-col items-start h-full md:px-6 md:py-8 px-1 py-2"},za={class:"flex items-center justify-between w-full mb-6"},Ma={class:"flex gap-2 items-center justify-center text-3xl text-zinc-800"},ja={class:"font-bold"},Ga={class:"flex-grow w-full pr-2 flex flex-col gap-3 custom-scrollbar"},Ka={class:"flex flex-col gap-4 p-1"},Ha={class:"flex flex-col gap-4 p-1"},Ya={class:"flex justify-end mt-4"},qa={class:"w-full mt-6 flex gap-4"};function Za(t,e,i,n,l,a){const r=h("Input"),f=h("AdvInput"),g=h("Button"),p=h("Sheet");return d(),A(p,{"model-value":a.showSheet,"onUpdate:modelValue":e[3]||(e[3]=v=>t.$emit("update:modelValue",v))},{default:y(()=>[o("div",Fa,[o("div",za,[o("div",Ma,[e[4]||(e[4]=o("i",{class:"ph ph-note-pencil"},null,-1)),o("span",ja,"Day Note for "+x(a.formattedDate),1)]),o("button",{onClick:e[0]||(e[0]=v=>t.$emit("update:modelValue",{...i.modelValue,showSheet:!1})),class:"text-zinc-500 hover:text-zinc-700 transition"},e[5]||(e[5]=[o("i",{class:"ph ph-x text-2xl"},null,-1)]))]),o("div",Ga,[s(f,{summary:l.localNote.title||"Enter a title for this day's note",label:"Note Title",icon:"ph-bookmark-simple"},{default:y(()=>[o("div",Ka,[s(r,{modelValue:l.localNote.title,"onUpdate:modelValue":e[1]||(e[1]=v=>l.localNote.title=v),placeholder:"e.g., Important Reminders, Day 3 Summary",label:"Title"},null,8,["modelValue"])])]),_:1},8,["summary"]),s(f,{summary:l.localNote.content?l.localNote.content.substring(0,50)+"...":"Add details for this note",label:"Note Details",icon:"ph-notepad"},{default:y(()=>[o("div",Ha,[s(r,{modelValue:l.localNote.content,"onUpdate:modelValue":e[2]||(e[2]=v=>l.localNote.content=v),type:"textarea",rows:"8",placeholder:"Write down anything important for this day: reminders, observations, things to remember, etc."},null,8,["modelValue"])])]),_:1},8,["summary"]),o("div",Ya,[i.modelValue.note&&i.modelValue.note.id?(d(),A(g,{key:0,onClick:a.deleteNote,variant:"ghost"},{default:y(()=>e[6]||(e[6]=[D(" Delete Note ")])),_:1},8,["onClick"])):T("",!0)])]),o("div",qa,[s(g,{onClick:a.cancelNote,variant:"secondary",class:"flex-1"},{default:y(()=>e[7]||(e[7]=[D(" Cancel ")])),_:1},8,["onClick"]),s(g,{onClick:a.saveNote,disabled:!l.localNote.title.trim(),class:"flex-1"},{default:y(()=>e[8]||(e[8]=[D(" Save Note ")])),_:1},8,["onClick","disabled"])])])]),_:1},8,["model-value"])}const $a=k(Oa,[["render",Za],["__scopeId","data-v-b1f489ca"]]),Wa=re({__name:"SheetMap",props:{showSheet:{type:Boolean,default:!1},activities:{type:Array,required:!0}},emits:["update:showSheet"],setup(t,{expose:e,emit:i}){e();const n=t,l=i,a=()=>{l("update:showSheet",!1),u()};let r=null;const f=de([]),g=async()=>{if(window.L)return window.L;if(await Promise.all([B(()=>Promise.resolve({}),__vite__mapDeps([0])).then(()=>{const C=document.createElement("link");C.rel="stylesheet",C.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(C)}),B(()=>import("./leaflet-src.C9nhyQhj.js").then(C=>C.l),[])]),!document.getElementById("leaflet-script")){const C=document.createElement("script");C.id="leaflet-script",C.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",document.head.appendChild(C),await new Promise(L=>C.onload=L)}return window.L},p=async()=>{const C=await g(),L=[...n.activities];let E=L.filter(V=>V.coordinates&&V.coordinates.latitude&&V.coordinates.longitude);const M=L.filter(V=>!V.coordinates);if(M.length>0)for(const V of M){const j=await fetch("/api/v1/geo-location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V.location)});j.ok&&(V.coordinates=await j.json(),E.push(V))}if(E.length===0)return u();const K=document.getElementById("map");if(!K)return;r?c():r=C.map(K,{zoomControl:!1,attributionControl:!1});const q=C.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"© OpenStreetMap"}),H=C.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:19,attribution:"Tiles © Esri"}),Z=C.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",{maxZoom:19,attribution:"© Esri"}),Y=C.layerGroup([H,Z]);Y.addTo(r),C.control.layers({Street:q,Satellite:H,Hybrid:Y},{},{position:"bottomright"}).addTo(r);function $(V){if(V.coordinates){const j=V.coordinates.latitude,W=V.coordinates.longitude;return`https://www.google.com/maps/@${j},${W},19z`}return"#"}f.value=E.map(V=>{const j=V.coordinates.latitude,W=V.coordinates.longitude,Q=C.marker([j,W]).addTo(r);return Q.bindPopup(`
      <div class="p-2">
        <strong>${V.title}</strong><br>
        ${V.location}<br>
        <a href="${$(V)}" target="_blank" style="color:#1a73e8;">
          View in Google Maps
        </a>
      </div>
    `),{marker:Q,activity:V}});const b=C.latLngBounds(f.value.map(V=>V.marker.getLatLng()));r.fitBounds(b,{padding:[50,50]})},v=C=>{if(!r)return;console.log(f.value),console.log(C);const L=f.value.find(E=>E.activity.id===C.id);if(console.log(L),L){const{marker:E}=L,M=E.getLatLng();r.setView(M,16,{animate:!0}),E.openPopup()}},u=()=>{r&&(r.remove(),r=null),f.value=[]},c=()=>{f.value.forEach(C=>C.marker.remove()),f.value=[]},w=ce(()=>n.showSheet);ue(w,C=>{C?p():u()}),me(()=>u());const S={props:n,emit:l,closeSheetViaProp:a,get map(){return r},set map(C){r=C},markers:f,loadLeaflet:g,initMapAndMarkers:p,focusActivity:v,clearMap:u,clearMarkers:c,showSheet:w,Sheet:P};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),Ja={class:"relative flex flex-col items-start grow h-full rounded-t-xl overflow-hidden"},Xa={class:"p-3 w-full"},Qa={class:"flex gap-3 overflow-x-auto pb-2 no-scrollbar"},ei=["onClick"],ti={class:"flex-shrink-0 text-zinc-500 text-3xl font-medium"},li={class:"flex flex-col min-w-0"},oi={class:"font-semibold text-zinc-800 text-sm truncate",title:"{{ activity.title }}"},ai={class:"text-xs text-zinc-500 truncate",title:"{{ activity.location }}"};function ii(t,e,i,n,l,a){return d(),A(n.Sheet,{"padding-on":!1,"model-value":n.showSheet,"onUpdate:modelValue":n.closeSheetViaProp},{default:y(()=>[o("div",Ja,[e[1]||(e[1]=o("div",{class:"z-10 absolute top-5 left-5 flex gap-2 items-center justify-center text-3xl p-2 rounded-xl bg-white text-zinc-700"},[o("i",{class:"ph ph-globe-hemisphere-west"}),o("span",{class:"font-bold"},"Map")],-1)),o("button",{onClick:n.closeSheetViaProp,class:"z-10 absolute top-5 right-5 cursor-pointer"},e[0]||(e[0]=[o("div",{class:"h-10 w-10 rounded-full flex items-center justify-center bg-white"},[o("i",{class:"text-black ph ph-x text-2xl"})],-1)])),e[2]||(e[2]=o("div",{class:"w-full grow flex flex-col h-full top-0 z-0"},[o("div",{id:"map",class:"h-full flex grow"})],-1)),o("div",Xa,[o("div",Qa,[(d(!0),m(R,null,N(i.activities,(r,f)=>(d(),m("div",{key:f,class:"flex-shrink-0 w-60 p-3 rounded-xl border border-zinc-200 bg-white hover:bg-zinc-100 cursor-pointer transition flex items-center gap-3",onClick:g=>n.focusActivity(r)},[o("span",ti,x(f+1),1),o("div",li,[o("div",oi,x(r.title),1),o("div",ai,x(r.location),1)])],8,ei))),128))])])])]),_:1},8,["model-value"])}const si=k(Wa,[["render",ii],["__scopeId","data-v-f32b9186"]]),ni={components:{Spinner:xe,AdvSquareCard:ie,Card:X,Tag:U,Button:I,PaymentButton:pe,SheetTripSettings:ft,SheetPreparation:Lt,SheetAddActivity:bl,SheetEditActivity:Ll,SheetViewActivity:ao,SheetAccom:go,SheetCompanions:$o,SheetBudget:ma,SheetTransportation:Da,SheetRoles:Ea,SheetDayNote:$a,SheetMap:si,CardActivity:oe,TimelineDot:le,ToastContainer:fe,Toast:he,TripDetailsHeader:je,TripSections:Ye,ActivityTimeline:tt},props:{tripId:{type:String,required:!0}},watch:{anySheetOpen(t){t?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll")}},data(){return{unsubscribeFromTripListener:null,user:{},dangerToast:{message:""},successToast:{message:""},isLoading:!0,useDb:be.get(),unsubscribeFromDbStore:null,tripConfig:{name:"",location:"",theme:"",date:{start:new Date,end:new Date}},settingsShowSheet:!1,preparationShowSheet:!1,accommodationShowSheet:!1,companionsShowSheet:!1,budgetShowSheet:!1,transportationShowSheet:!1,mapShowSheet:!1,rolesShowSheet:!1,dayNoteShowSheet:!1,addActivityShowSheet:!1,editActivityShowSheet:!1,selectedActivityShowSheet:!1,settings:{showSheet:!1,trip:{name:"Summer in Baguio City",location:"Baguio City",theme:"peach",date:{start:new Date,end:new Date}}},ownerUid:"",preparation:{showSheet:!1,preparationsChecklist:[]},accommodation:{showSheet:!1,name:"",type:"",location:"",numberOfRooms:0,totalCost:0,checkInTime:"15:00",checkOutTime:"11:00",dates:{start:"",end:""}},companions:{showSheet:!1},budget:{showSheet:!1,totalBudget:null,currency:"PHP",categories:[]},transportation:{showSheet:!1},roles:{showSheet:!1},dayNote:{showSheet:!1},addActivity:{showSheet:!1},activities:[],editActivity:{showSheet:!1},selectedActivity:{showSheet:!1,activity:{id:"act_foodie_002",name:"Strawberry Picking at La Trinidad Farm",time:"08:30",date:"2025-06-16",location:"Strawberry Farm, La Trinidad, Benguet",budget:350,budgetCurrency:"PHP",budgetNotes:"Per basket (est.), transportation not included",description:"Head early to the famous Strawberry Farm in La Trinidad, just outside Baguio, to pick fresh strawberries. Enjoy the cool morning air and local produce.",icon:"ph-apple-bin"}},planningProgress:{completed:1,total:7},onlineCompanions:[],unsubscribeFromPresenceListener:null}},computed:{progressOfPlanning(){return{completed:[this.activities?.length>0,this.budget.categories?.length>0,this.companions?.length>1,this.preparation?.preparationsChecklist.length>0,!!this.accommodation?.name].filter(Boolean).length,total:7}},cardClass(){switch(this.tripConfig.theme){case"peach":return"border-primary-light-sm shadow-primary-light-md";case"blue":return"border-info-light-sm shadow-info-light-md";case"amber":return"border-warning-light-sm shadow-warning-light-md";case"emerald":return"border-success-light-sm shadow-success-light-md";default:return"border-primary-light-sm shadow-primary-light-md"}},anySheetOpen(){return this.settingsShowSheet||this.preparationShowSheet||this.accommodationShowSheet||this.companionsShowSheet||this.budgetShowSheet||this.addActivityShowSheet||this.editActivityShowSheet||this.selectedActivityShowSheet||this.mapShowSheet}},methods:{copyUrlToClipboard(){try{const t=window.location.href;navigator.clipboard.writeText(t).then(()=>{this.successToast.message="URL copied to clipboard!"}).catch(e=>{throw new Error(e)})}catch(t){console.error("Failed to copy URL:",t),this.dangerToast.message="Failed to copy URL. Please try again."}},showViewActivitySheet(t){this.selectedActivityShowSheet=!0,this.selectedActivity.activity=t},async deleteTrip(){if(confirm("Do you want to delete this trip?")){const t=await fetch(`/api/v1/trip?tripId=${this.tripId}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();console.error(e.message),this.dangerToast.message=e.message;return}this.successToast.message="Trip Deleted!",window.location.href="/trips"}},async companionAdded(){await this.fetchTrip()},async companionRemoved(){await this.fetchTrip()},async updateActivity(t){try{const e=await fetch("/api/v1/activity",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const l=await e.json();throw console.error("Error updating an activity:",l.message),new Error(`Error updating an activity: ${l.message}`)}const i=await e.json(),n=this.activities.findIndex(l=>l.id===i?.updatedActivity?.id);this.activities[n]=i.updatedActivity,this.successToast.message=i.message}catch(e){console.error(e),this.dangerToast.message=e}},editSelectedActivity(t){this.editActivityShowSheet=!0,this.editActivity={activity:t}},async deleteActivity(t){try{const e=await fetch(`/api/v1/activity?activityId=${t}&tripId=${this.tripId}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok){const n=await e.json();throw new Error(`Error delete activity: ${n.message}`)}const i=await e.json();this.successToast.message=i.message,this.activities=this.activities.filter(n=>n.id!==t)}catch(e){console.error(e)}},async addNewActivity(t){try{const e=await fetch("/api/v1/activity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,tripId:this.tripId})});if(!e.ok){const n=await e.json();throw console.error("Error saving activity:",n.message),new Error(`Error saving activity: ${n.message}`)}const i=await e.json();this.activities.push(i.createdActivity),this.successToast.message=i.message}catch(e){console.error(e),this.dangerToast.message=e}},hasPayload(t){return t===null||typeof t>"u"},initTripConfig(t){if(!this.hasPayload(t))try{this.tripConfig.name=t.trip.name,this.tripConfig.location=t.trip.location,this.tripConfig.date.start=t.trip.start_date,this.tripConfig.date.end=t.trip.end_date,this.tripConfig.theme=t.trip.theme}catch(e){console.error(e)}},initBudget(t){try{this.budget=t.trip.budget}catch(e){console.error(e)}},initAccommodation(t){if(!this.hasPayload(t))try{this.accommodation=t?.trip?.accommodation?t.trip.accommodation:this.accommodation,this.accommodation.location=t.trip.location,this.accommodation.dates={start:t.trip.start_date,end:t.trip.end_date}}catch(e){console.error(e)}},initSettings(t){this.settings.trip.name=t.trip.name,this.settings.trip.date={start:t.trip.start_date,end:t.trip.end_date},this.settings.trip.theme=t.trip.theme,this.settings.trip.location=t.trip.location},initPreparation(t){if(!this.hasPayload(t))try{this.preparation=t.trip.preparation}catch(e){console.error(e)}},initActivities(t){this.activities=t.trip.activities},async saveSettings(t){try{this.tripConfig.name=t.name??this.tripConfig.name,this.tripConfig.location=t.location??this.tripConfig.location,this.tripConfig.theme=t.theme??this.tripConfig.theme,t.date&&(this.tripConfig.date.start=t.date.start??this.tripConfig.date.start,this.tripConfig.date.end=t.date.end??this.tripConfig.date.end);const e=await fetch("/api/v1/trip",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tripData:this.tripConfig,tripId:this.tripId})})}catch(e){console.error("Error at Saving Settings",e),this.dangerToast.message="Error at saving settings."}},async fetchUser(){const t=await fetch("/api/v1/me");if(!t.ok){const e=await t.json();console.error(e)}this.user=await t.json()},setTripConfig(t){this.tripConfig.name=t.name,this.tripConfig.location=t.location,this.tripConfig.theme=t.theme,this.tripConfig.date.start=new Date(t.date.start),this.tripConfig.date.end=new Date(t.date.end)},setTripSettings(t){this.settings.trip={...this.tripConfig}},setActivities(t){this.activities=t.activities},setPreparation(t){this.preparation.preparationsChecklist=t.tasks},setAccommodation(t){try{const e=t.accommodations.sort((i,n)=>i.createdAt._seconds-n.createdAt._seconds)[t.accommodations.length-1];this.accommodation={...e,dates:{start:new Date(e.dates.start),end:new Date(e.dates.end)}}}catch(e){console.log(e)}},setBudget(t){this.budget.totalBudget=t.overallBudget,this.budget.categories=t.budget},setCompanions(t){this.companions=t.companions},setOwnerUid(t){this.ownerUid=t.ownerUid},async fetchTrip(){const e=await(await fetch(`/api/v1/trip?tripId=${this.tripId}`,{method:"GET",header:{"Content-Type":"application/json"}})).json();this.setTripConfig(e),this.setTripSettings(e),this.setActivities(e),this.setPreparation(e),this.setAccommodation(e),this.setBudget(e),this.setCompanions(e),this.setOwnerUid(e)},async setPresence(){if(!this.user?.uid)return;const{doc:t}=await B(async()=>{const{doc:n}=await import("./index.esm.vxxS9n3R.js").then(l=>l.I);return{doc:n}},[]),{firestore:e}=await B(async()=>{const{firestore:n}=await import("./client.Db7OmKgL.js").then(l=>l.c);return{firestore:n}},__vite__mapDeps([1,2])),i=t(e,`trips/${this.tripId}/onlineUsers`,this.user.uid);try{const{setDoc:n}=await B(()=>import("./index.esm.vxxS9n3R.js").then(l=>l.I),[]);await n(i,{uid:this.user.uid,name:this.user.displayName||this.user.email,photoURL:this.user.photoURL||null,lastActive:new Date().toISOString()})}catch(n){console.error("Error setting presence:",n)}},async removePresence(){if(!this.user?.uid)return;const{doc:t}=await B(async()=>{const{doc:n}=await import("./index.esm.vxxS9n3R.js").then(l=>l.I);return{doc:n}},[]),{firestore:e}=await B(async()=>{const{firestore:n}=await import("./client.Db7OmKgL.js").then(l=>l.c);return{firestore:n}},__vite__mapDeps([1,2])),i=t(e,`trips/${this.tripId}/onlineUsers`,this.user.uid);try{const{deleteDoc:n}=await B(async()=>{const{deleteDoc:l}=await import("./index.esm.vxxS9n3R.js").then(a=>a.I);return{deleteDoc:l}},[]);await n(i)}catch(n){console.error("Error removing presence:",n)}},async setupPresenceListener(){if(!this.tripId)return;const{collection:t,onSnapshot:e}=await B(async()=>{const{collection:l,onSnapshot:a}=await import("./index.esm.vxxS9n3R.js").then(r=>r.I);return{collection:l,onSnapshot:a}},[]),{firestore:i}=await B(async()=>{const{firestore:l}=await import("./client.Db7OmKgL.js").then(a=>a.c);return{firestore:l}},__vite__mapDeps([1,2])),n=t(i,`trips/${this.tripId}/companions`);this.unsubscribeFromPresenceListener=e(n,l=>{const a=[];l.forEach(r=>{a.push({id:r.id,...r.data()})}),this.onlineCompanions=a},l=>{console.error("Error listening to online users:",l)})}},async mounted(){await this.fetchTrip(),await this.fetchUser(),this.isLoading=!1;const{doc:t,onSnapshot:e,collection:i}=await B(async()=>{const{doc:v,onSnapshot:u,collection:c}=await import("./index.esm.vxxS9n3R.js").then(w=>w.I);return{doc:v,onSnapshot:u,collection:c}},[]),{firestore:n}=await B(async()=>{const{firestore:v}=await import("./client.Db7OmKgL.js").then(u=>u.c);return{firestore:v}},__vite__mapDeps([1,2])),l=t(n,"trips",this.tripId);this.unsubscribeFromTripListener=e(l,async v=>{v.exists()?await this.fetchTrip():console.log("Trip document does not exists")},v=>{console.error("Error listening to trip document:",v),this.dangerToast.message="Error fetching real-time data."});const a=i(n,`trips/${this.tripId}/activities`);this.unsubscribeFromActivitiesListener=e(a,async v=>{await this.fetchTrip()});const r=i(n,`trips/${this.tripId}/preparation`);this.unsubscribeFromPreparationListener=e(r,async v=>{await this.fetchTrip()});const f=i(n,`trips/${this.tripId}/accommodations`);this.unsubscribeFromAccommodationsListener=e(f,async v=>{await this.fetchTrip()});const g=i(n,`trips/${this.tripId}/budget`);this.unsubscribeFromBudgetListener=e(g,async v=>{await this.fetchTrip()});const p=i(n,`trips/${this.tripId}/companions`);this.unsubscribeFromCompanionsListener=e(p,async v=>{await this.fetchTrip()}),this.user?.uid&&(await this.setPresence(),await this.setupPresenceListener(),window.addEventListener("beforeunload",this.removePresence)),document.addEventListener("astro:before-swap",()=>{this.unsubscribeFromTripListener&&this.unsubscribeFromTripListener(),this.unsubscribeFromActivitiesListener&&this.unsubscribeFromActivitiesListener(),this.unsubscribeFromPreparationListener&&this.unsubscribeFromPreparationListener(),this.unsubscribeFromAccommodationsListener&&this.unsubscribeFromAccommodationsListener(),this.unsubscribeFromBudgetListener&&this.unsubscribeFromBudgetListener(),this.unsubscribeFromCompanionsListener&&this.unsubscribeFromCompanionsListener(),this.unsubscribeFromPresenceListener&&this.unsubscribeFromPresenceListener(),this.removePresence(),window.removeEventListener("beforeunload",this.removePresence)},{once:!0})},unmounted(){}},ri={key:0,class:"flex items-center justify-center w-full h-[32rem]"},di={key:0,class:"grow mt-8 md:mt-16 fadeIn"};function ci(t,e,i,n,l,a){const r=h("Spinner"),f=h("TripDetailsHeader"),g=h("TripSections"),p=h("ActivityTimeline"),v=h("Card"),u=h("Toast"),c=h("ToastContainer"),w=h("SheetTripSettings"),S=h("SheetPreparation"),C=h("SheetAccom"),L=h("SheetCompanions"),E=h("SheetBudget"),M=h("SheetTransportation"),K=h("SheetRoles"),q=h("SheetAddActivity"),H=h("SheetEditActivity"),Z=h("SheetViewActivity"),Y=h("SheetDayNote"),$=h("SheetMap");return d(),m(R,null,[l.isLoading?(d(),m("div",ri,[s(r,{label:"Loading your trips"})])):(d(),m(R,{key:1},[l.tripConfig.name?(d(),m("div",di,[s(v,{customClass:a.cardClass+" max-w-4xl mx-auto p-0! overflow-hidden rounded-4xl bg-white"},{default:y(()=>[s(f,{"online-companions":l.onlineCompanions,"trip-config":l.tripConfig,"planning-progress":a.progressOfPlanning,onShowSettings:e[0]||(e[0]=b=>l.settingsShowSheet=!0),onShowMap:e[1]||(e[1]=b=>l.mapShowSheet=!0),onCopyToClipboard:a.copyUrlToClipboard},null,8,["online-companions","trip-config","planning-progress","onCopyToClipboard"]),s(g,{onShowAccommodation:e[2]||(e[2]=b=>l.accommodationShowSheet=!0),onShowBudget:e[3]||(e[3]=b=>l.budgetShowSheet=!0),onShowCompanions:e[4]||(e[4]=b=>l.companionsShowSheet=!0),onShowPreparation:e[5]||(e[5]=b=>l.preparationShowSheet=!0),onShowRoles:e[6]||(e[6]=b=>l.rolesShowSheet=!0),onShowTransportation:e[7]||(e[7]=b=>l.transportationShowSheet=!0),preparation:l.preparation,budget:l.budget,accommodation:l.accommodation,companions:l.companions,roles:l.roles,transportation:l.transportation},null,8,["preparation","budget","accommodation","companions","roles","transportation"]),s(p,{"trip-config":l.tripConfig,activities:l.activities,onShowAddActivity:e[8]||(e[8]=b=>l.addActivityShowSheet=!0),onShowDayNote:e[9]||(e[9]=b=>l.dayNoteShowSheet=!0),onShowViewActivity:a.showViewActivitySheet},null,8,["trip-config","activities","onShowViewActivity"])]),_:1},8,["customClass"]),e[33]||(e[33]=o("div",{id:"fuck"},null,-1))])):T("",!0)],64)),s(c,null,{default:y(()=>[s(u,{variant:"error",ref:"dangerToast",message:l.dangerToast.message},null,8,["message"]),s(u,{variant:"success",ref:"successToast",message:l.successToast.message},null,8,["message"])]),_:1}),s(w,{showSheet:l.settingsShowSheet,"onUpdate:showSheet":e[10]||(e[10]=b=>l.settingsShowSheet=b),modelValue:l.settings,"onUpdate:modelValue":e[11]||(e[11]=b=>l.settings=b),onSave:a.saveSettings,onDelete:a.deleteTrip},null,8,["showSheet","modelValue","onSave","onDelete"]),s(S,{showSheet:l.preparationShowSheet,"onUpdate:showSheet":e[12]||(e[12]=b=>l.preparationShowSheet=b),modelValue:l.preparation,"onUpdate:modelValue":e[13]||(e[13]=b=>l.preparation=b)},null,8,["showSheet","modelValue"]),s(C,{showSheet:l.accommodationShowSheet,"onUpdate:showSheet":[e[14]||(e[14]=b=>l.accommodationShowSheet=b),l.accommodationShowSheet],modelValue:l.accommodation,"onUpdate:modelValue":e[15]||(e[15]=b=>l.accommodation=b)},null,8,["showSheet","onUpdate:showSheet","modelValue"]),s(L,{onCompanionAdded:a.companionAdded,onCompanionRemoved:a.companionRemoved,uid:l.user.uid,"accepted-friendships":l.user.acceptedFriendships,ownerUid:l.ownerUid,showSheet:l.companionsShowSheet,"onUpdate:showSheet":e[16]||(e[16]=b=>l.companionsShowSheet=b),modelValue:l.companions,"onUpdate:modelValue":e[17]||(e[17]=b=>l.companions=b)},null,8,["onCompanionAdded","onCompanionRemoved","uid","accepted-friendships","ownerUid","showSheet","modelValue"]),s(E,{showSheet:l.budgetShowSheet,"onUpdate:showSheet":e[18]||(e[18]=b=>l.budgetShowSheet=b),modelValue:l.budget,"onUpdate:modelValue":e[19]||(e[19]=b=>l.budget=b)},null,8,["showSheet","modelValue"]),s(M,{showSheet:l.transportationShowSheet,"onUpdate:showSheet":e[20]||(e[20]=b=>l.transportationShowSheet=b),modelValue:l.transportation,"onUpdate:modelValue":e[21]||(e[21]=b=>l.transportation=b)},null,8,["showSheet","modelValue"]),s(K,{showSheet:l.rolesShowSheet,"onUpdate:showSheet":e[22]||(e[22]=b=>l.rolesShowSheet=b),modelValue:l.roles,"onUpdate:modelValue":e[23]||(e[23]=b=>l.roles=b)},null,8,["showSheet","modelValue"]),s(q,{showSheet:l.addActivityShowSheet,"onUpdate:showSheet":e[24]||(e[24]=b=>l.addActivityShowSheet=b),dateRange:l.tripConfig.date,modelValue:l.addActivity,"onUpdate:modelValue":e[25]||(e[25]=b=>l.addActivity=b),onActivitySaved:a.addNewActivity},null,8,["showSheet","dateRange","modelValue","onActivitySaved"]),s(H,{showSheet:l.editActivityShowSheet,"onUpdate:showSheet":e[26]||(e[26]=b=>l.editActivityShowSheet=b),dateRange:l.tripConfig.date,modelValue:l.editActivity,"onUpdate:modelValue":e[27]||(e[27]=b=>l.editActivity=b),onActivitySaved:a.updateActivity},null,8,["showSheet","dateRange","modelValue","onActivitySaved"]),s(Z,{showSheet:l.selectedActivityShowSheet,"onUpdate:showSheet":e[28]||(e[28]=b=>l.selectedActivityShowSheet=b),modelValue:l.selectedActivity,"onUpdate:modelValue":e[29]||(e[29]=b=>l.selectedActivity=b),onEditActivity:a.editSelectedActivity,onDeleteActivity:a.deleteActivity},null,8,["showSheet","modelValue","onEditActivity","onDeleteActivity"]),s(Y,{showSheet:l.dayNoteShowSheet,"onUpdate:showSheet":e[30]||(e[30]=b=>l.dayNoteShowSheet=b),modelValue:l.dayNote,"onUpdate:modelValue":e[31]||(e[31]=b=>l.dayNote=b)},null,8,["showSheet","modelValue"]),s($,{activities:l.activities,showSheet:l.mapShowSheet,"onUpdate:showSheet":e[32]||(e[32]=b=>l.mapShowSheet=b)},null,8,["activities","showSheet"])],64)}const Ii=k(ni,[["render",ci]]);export{Ii as default};
