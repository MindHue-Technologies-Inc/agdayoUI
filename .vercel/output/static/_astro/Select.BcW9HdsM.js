import{v as p,w as c,a as u}from"./runtime-dom.esm-bundler.hnKfWXw2.js";/* empty css                        */import{_ as m}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as n,a as d,b as a,t as r,l as x,n as f,F as b,j as O,o}from"./runtime-core.esm-bundler.CXnlPxLE.js";const w={name:"Select",props:{modelValue:{type:[String,Number,null],default:null},id:{type:String,required:!0},label:String,placeholder:String,options:{type:Array,required:!0},optionLabel:{type:String,default:"label"},optionValue:{type:String,default:"value"},disabled:{type:Boolean,default:!1},error:{type:String,default:""},customClass:{type:String,default:""},prefix:{type:String,default:""},prefixIcon:{type:String,default:""},suffix:{type:String,default:""}},emits:["update:modelValue"],data(){return{searchTerm:"",showOptions:!1,filteredOptions:[],highlightedIndex:-1}},computed:{baseClasses(){return`
        w-full py-3 text-base rounded-full border-secondary-xs
        text-zinc-800
        bg-white!
        shadow-secondary-sm focus:ring-0 focus:outline-none
      `},suffixIcon(){return"caret-down"}},watch:{modelValue:{immediate:!0,handler(s){if(s!=null){const t=this.options.find(e=>e[this.optionValue]===s);t&&(this.searchTerm=t[this.optionValue])}else this.searchTerm=""}},options:{handler(){this.filterOptions()},immediate:!0},showOptions(s){s||(this.highlightedIndex=-1)}},methods:{filterOptions(){if(this.highlightedIndex=-1,this.searchTerm.trim()==="")this.filteredOptions=this.options;else{const s=this.searchTerm.toLowerCase();this.filteredOptions=this.options.filter(t=>t[this.optionLabel].toLowerCase().includes(s))}this.$emit("update:modelValue",this.searchTerm)},selectOption(s){this.searchTerm=s[this.optionLabel],this.$emit("update:modelValue",s[this.optionValue]),this.showOptions=!1},handleBlur(){setTimeout(()=>{this.showOptions=!1,this.options.find(t=>t[this.optionLabel]===this.searchTerm)||this.$emit("update:modelValue",this.searchTerm)},150)},highlightPrevious(){this.showOptions?this.highlightedIndex>0?this.highlightedIndex--:this.highlightedIndex=this.filteredOptions.length-1:(this.showOptions=!0,this.highlightedIndex=this.filteredOptions.length-1)},highlightNext(){this.showOptions?this.highlightedIndex<this.filteredOptions.length-1?this.highlightedIndex++:this.highlightedIndex=0:(this.showOptions=!0,this.highlightedIndex=0)},selectHighlighted(){this.highlightedIndex!==-1&&this.filteredOptions[this.highlightedIndex]?this.selectOption(this.filteredOptions[this.highlightedIndex]):this.searchTerm.trim()!==""&&this.filteredOptions.length===1&&this.selectOption(this.filteredOptions[0])},scrollIntoView(){this.$nextTick(()=>{const s=this.$el.querySelector(".bg-peach-100");s&&s.scrollIntoView({block:"nearest",behavior:"smooth"})})}},mounted(){this.filterOptions()}},y={class:"flex flex-col gap-1"},v=["for"],I={class:"relative"},_={key:0,class:"absolute left-0 pl-6 flex items-center h-full pointer-events-none text-zinc-500 dark:text-zinc-400 z-10"},z={key:1,class:"absolute left-0 pl-6 flex items-center h-full pointer-events-none text-zinc-500 dark:text-zinc-400 z-10"},T=["id","disabled","placeholder"],S={key:2,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-zinc-200 rounded-lg shadow-lg z-20 max-h-60 overflow-y-auto"},k={role:"listbox"},V=["onMousedown"],C={key:3,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-zinc-200 rounded-lg shadow-lg z-20 p-4 text-zinc-500 text-center"},B={class:"absolute right-0 top-0 pr-3 flex items-center h-full text-zinc-500 dark:text-zinc-400 pointer-events-none z-10"},L={key:0},N={key:1,class:"text-sm text-red-500"};function M(s,t,e,q,h,l){return o(),n("div",y,[e.label?(o(),n("label",{key:0,for:e.id,class:"ml-6 text-sm font-medium text-zinc-900"},r(e.label),9,v)):d("",!0),a("div",I,[e.prefix?(o(),n("div",_,r(e.prefix),1)):d("",!0),e.prefixIcon?(o(),n("div",z,[a("i",{class:f(e.prefixIcon)},null,2)])):d("",!0),x(a("input",{id:e.id,type:"text",disabled:e.disabled,placeholder:e.placeholder,autocomplete:"off",class:f([l.baseClasses,e.prefix||e.prefixIcon?"pl-12":"pl-6",e.suffix||l.suffixIcon?"pr-12":"pr-6",e.disabled?"bg-zinc-100 cursor-not-allowed":"",e.customClass]),"onUpdate:modelValue":t[0]||(t[0]=i=>h.searchTerm=i),onFocus:t[1]||(t[1]=i=>h.showOptions=!0),onInput:t[2]||(t[2]=(...i)=>l.filterOptions&&l.filterOptions(...i)),onBlur:t[3]||(t[3]=(...i)=>l.handleBlur&&l.handleBlur(...i)),onKeydown:[t[4]||(t[4]=c(u((...i)=>l.highlightPrevious&&l.highlightPrevious(...i),["prevent"]),["up"])),t[5]||(t[5]=c(u((...i)=>l.highlightNext&&l.highlightNext(...i),["prevent"]),["down"])),t[6]||(t[6]=c(u((...i)=>l.selectHighlighted&&l.selectHighlighted(...i),["prevent"]),["enter"]))]},null,42,T),[[p,h.searchTerm]]),h.showOptions&&h.filteredOptions.length>0?(o(),n("div",S,[a("ul",k,[(o(!0),n(b,null,O(h.filteredOptions,(i,g)=>(o(),n("li",{key:i[e.optionValue],class:f(["px-4 py-2 cursor-pointer hover:bg-peach-100",{"bg-peach-100":g===h.highlightedIndex}]),onMousedown:u(F=>l.selectOption(i),["prevent"])},r(i[e.optionLabel]),43,V))),128))])])):h.showOptions&&h.searchTerm&&h.filteredOptions.length===0?(o(),n("div",C,' No results found for "'+r(h.searchTerm)+'" ',1)):d("",!0),a("div",B,[e.suffix?(o(),n("span",L,r(e.suffix),1)):(o(),n("i",{key:1,class:f(`ph ph-${l.suffixIcon}`)},null,2))])]),e.error?(o(),n("p",N,r(e.error),1)):d("",!0)])}const j=m(w,[["render",M],["__scopeId","data-v-c125cf9c"]]);export{j as S};
