import{T as M}from"./runtime-dom.esm-bundler.hnKfWXw2.js";import{A as O}from"./Anchor.C7T8HRHh.js";/* empty css                       */import{_ as z}from"./_plugin-vue_export-helper.DlAUqK2U.js";/* empty css                        */import{C as L}from"./Card.DAiZEWK-.js";import{T as Y}from"./Tag.CLo6xTH_.js";import{S as F}from"./Spinner.JaC9Bi1L.js";import{c as m,o as d,j as B,F as E,r as S,f as C,w as p,b as t,n as g,t as o,a as x,d as v,m as P,h as W,e as I,i as T,$,g as k}from"./runtime-core.esm-bundler.CXnlPxLE.js";/* empty css                       */const H={components:{Spinner:F,Card:L,Tag:Y},props:{trips:{type:Array,required:!0}},data(){return{isLoading:!1}},watch:{trips(){this.trips&&(this.isLoading=!1)}},methods:{formattedCost(a,e){return typeof a=="number"?new Intl.NumberFormat("en-PH",{style:"currency",currency:e}).format(a):a},days(a){const e=[];new Date(a.date.start);const r=new Date(a.date.end),c=navigator.language||"en-US";let l=new Date(a.date.start);for(;l<=r;){const s=l.getFullYear(),u=l.getMonth()+1<10?`0${l.getMonth()+1}`:`${l.getMonth()+1}`,f=l.getDate()<10?`0${l.getDate()}`:`${l.getDate()}`,n=`${s}-${u}-${f}`;new Intl.DateTimeFormat(c,{weekday:"short",month:"short",day:"numeric"}).format(l),e.push(n),l.setDate(l.getDate()+1)}return e},getDay(a){const e=new Date(a);return["SUN","MON","TUE","WED","THU","FRI","SAT"][e.getDay()]},formatTime(a){if(!a)return;const e=a.split(":");let r=Number(e[0]);r=r%12,r=r===0?12:r;let c=e[1],l=Number(e[0])>=12?"PM":"AM";return`${r}:${c} ${l}`},currentActivity(a){const e=a.activities?.filter(r=>r.datetime<=this.getLocalIsoStringWithOffset(new Date));return e&&e.sort((r,c)=>c.datetime.localeCompare(r.datetime))[0]},nextActivity(a){const e=a.activities?.filter(r=>r.datetime>=this.getLocalIsoStringWithOffset(new Date));return e&&e.sort((r,c)=>r.datetime.localeCompare(c.datetime))[0]},getLocalIsoStringWithOffset(a){const e=n=>n<10?"0"+n:n,r=a.getFullYear(),c=e(a.getMonth()+1),l=e(a.getDate()),s=e(a.getHours()),u=e(a.getMinutes()),f=e(a.getSeconds());return a.getTimezoneOffset(),`${r}-${c}-${l}T${s}:${u}:${f}`},progressOfPlanning(a){return[a.activityIds?.length>0,a.budgetIds?.length>0,a.companionsUids?.length>1,a.taskIds?.length>0,!!a.accommodationIds?.length>0].filter(Boolean).length},checkUpcoming(a,e){const r=new Date,c=new Date(a),l=new Date(e);if(r<c)return"Upcoming";if(c<=r&&r<=l)return"Active";if(l<r)return"Completed"},cardClass(a){switch(a){case"peach":return"border-primary-light-sm shadow-primary-light-md";case"blue":return"border-info-light-sm shadow-info-light-md";case"amber":return"border-warning-light-sm shadow-warning-light-md";case"emerald":return"border-success-light-sm shadow-success-light-md";default:return"border-primary-light-sm shadow-primary-light-md"}},dateClass(a){switch(a){case"peach":return"bg-peach-100 text-peach-600";case"blue":return"bg-sky-100 text-sky-600";case"amber":return"bg-amber-100 text-amber-600";case"emerald":return"bg-emerald-100 text-emerald-600";case"purple":return"!text-purple-700 bg-purple-200";default:return"bg-peach-100 text-peach-600"}},headerClass(a){switch(a){case"peach":return"bg-peach-50";case"blue":return"bg-sky-50";case"amber":return"bg-amber-50";case"emerald":return"bg-emerald-50";default:return"bg-peach-50"}},progressClass(a){switch(a){case"peach":return"bg-peach-500";case"blue":return"bg-sky-500";case"amber":return"bg-amber-500";case"emerald":return"bg-emerald-500";default:return"bg-peach-500"}},progressBgClass(a){switch(a){case"peach":return"bg-peach-200";case"blue":return"bg-sky-200";case"amber":return"bg-amber-200";case"emerald":return"bg-emerald-200";default:return"bg-peach-200"}},textClass(a){switch(a){case"peach":return"text-peach-500";case"blue":return"text-sky-500";case"purple":return"!text-purple-500";case"amber":return"text-amber-500";case"emerald":return"text-emerald-500";default:return"text-peach-500"}},formatDateRange(a,e){if(!a||!e)return"";const r=new Date(a),c=new Date(e);if(isNaN(r.getTime())||isNaN(c.getTime()))return console.warn(`Invalid date string(s) for range: Start "${a}", End "${e}"`),"";const l={month:"short",day:"numeric"},s={year:"numeric"},u=new Intl.DateTimeFormat("en-US",l).format(r),f=new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(c),n=new Intl.DateTimeFormat("en-US",s).format(c);if(a===e)return`${u}, ${n}`;if(r.getMonth()===c.getMonth()&&r.getFullYear()===c.getFullYear())return`${u.split(" ")[0]} ${new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(r)} - ${f}, ${n}`;const y=new Intl.DateTimeFormat("en-US",l).format(r),w=new Intl.DateTimeFormat("en-US",l).format(c);if(r.getFullYear()===c.getFullYear())return`${y} - ${w}, ${n}`;{const i=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(r),h=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(c);return`${i} - ${h}`}}}},V=["href"],R={class:"font-extrabold text-2xl sm:text-3xl text-zinc-800 tracking-tight outfit leading-tight truncate"},q={class:"flex gap-1 items-center"},G={class:"flex flex-row gap-2 items-center"},J={class:"flex gap-1 items-center"},K={id:"date-range"},Q={class:"flex gap-1 items-center"},X={class:"flex flex-col gap-3 p-6 sm:p-6 md:p-8 pt-2!"},Z={class:"flex flex-col items-center justify-start pt-1 pr-3 md:pr-6 border-r border-zinc-200"},ee={class:"text-peach-500 border-b text-lg mb-2"},te={class:"text-xs text-zinc-500 mt-0.5"},se={class:"font-bold text-lg text-zinc-800 whitespace-nowrap"},ne={class:"flex flex-col gap-2 pl-2 w-full justify-center"},ae={class:"flex items-center justify-between w-full gap-1"},re={class:"flex items-center gap-1"},ce={class:"text-lg font-medium"},le={class:"flex items-center gap-1 text-sm text-zinc-500 mt-1"},ie={key:0,class:"flex items-center gap-1 text-sm text-zinc-500 mt-1"},oe={key:0,class:"ph ph-wallet text-peach-400 flex-shrink-0"},de={key:1,class:"font-semibold text-zinc-600"},me={key:2,class:"text-zinc-400"},ue={key:1,class:"flex flex-col items-center justify-center"},fe={key:2,class:"flex items-center justify-center"},xe={key:3,class:"text-lg text-zinc-800 font-semibold"},ge={class:"flex flex-col items-center justify-start pt-1 pr-3 md:pr-6 border-r border-zinc-200"},he={class:"text-peach-500 border-b text-lg mb-2"},pe={class:"text-xs text-zinc-500 mt-0.5"},ye={class:"font-bold text-lg text-zinc-800 whitespace-nowrap"},ve={class:"flex flex-col gap-2 pl-2 w-full justify-center"},be={class:"flex items-center justify-between w-full gap-1"},_e={class:"flex items-center gap-1"},we={class:"text-lg font-medium"},Ae={class:"flex items-center gap-1 text-sm text-zinc-500 mt-1"},Ce={key:0,class:"flex items-center gap-1 text-sm text-zinc-500 mt-1"},De={key:0,class:"ph ph-wallet text-peach-400 flex-shrink-0"},Te={key:1,class:"font-semibold text-zinc-600"},ke={key:2,class:"text-zinc-400"};function ze(a,e,r,c,l,s){const u=S("Card"),f=S("Spinner");return d(!0),m(E,null,B(r.trips,(n,y)=>(d(),C(u,{class:g(["fadeIn",`fadeIn-${y}`]),customClass:s.cardClass(n.theme)+"w-full p-0! overflow-hidden rounded-4xl hover:shadow-lg transition-shadow duration-200 cursor-pointer"},{default:p(()=>[t("a",{href:`/trips/${n.id}`,class:"block"},[t("div",{class:g(["flex flex-col gap-3 p-6 sm:p-6 md:p-8",s.headerClass(n.theme)])},[t("div",null,[t("h3",R,o(n.name),1)]),t("div",q,[t("i",{class:g([s.textClass(n.theme),"ph ph-map-pin text-base"])},null,2),t("span",null,o(n.location),1)]),t("div",G,[t("div",{class:g(["text-xs px-2 py-1 rounded-md flex flex-row flex-wrap items-center font-medium text-sm",[s.dateClass(n.theme)]])},[t("div",J,[t("i",{class:g([s.textClass(n.theme),"ph ph-calendar-dots text-base"])},null,2),t("span",K,o(s.formatDateRange(n.date.start,n.date.end)),1)])],2),t("div",{class:g(["text-xs px-2 py-1 rounded-md flex flex-row flex-wrap items-center font-medium text-sm",[s.dateClass("purple")]])},[t("div",Q,[t("i",{class:g([s.textClass("purple"),"ph ph-users text-base"])},null,2),t("span",null,o(n.companionsUids.length)+" Companion"+o(n.companionsUids.length>1?"s":""),1)])],2)])],2),t("div",X,[e[3]||(e[3]=t("span",{class:"text-lg text-zinc-800 font-semibold"},"Current Activity",-1)),s.currentActivity(n)?(d(),C(u,{key:0,class:"fadeIn md:!p-6 !p-3 gap-2 grow rounded-[1.2rem] border border-peach-400 shadow-sm transition-all duration-200 hover:shadow-md cursor-pointer flex-row!"},{default:p(()=>[t("div",Z,[t("span",ee,"Day "+o(s.days(n).indexOf(s.currentActivity(n)?.date)+1),1),t("span",te,o(s.getDay(s.currentActivity(n)?.datetime)),1),t("span",se,o(s.formatTime(s.currentActivity(n)?.time)),1)]),t("div",ne,[t("div",ae,[t("div",re,[t("i",{class:g(["ph text-xl text-peach-400",s.currentActivity(n)?.iconName])},null,2),t("span",ce,o(s.currentActivity(n)?.title),1)])]),t("div",le,[e[0]||(e[0]=t("i",{class:"ph ph-map-pin text-peach-400 flex-shrink-0"},null,-1)),t("span",null,o(s.currentActivity(n)?.location.split(",")[0]),1)]),s.currentActivity(n)?.costNote||s.currentActivity(n)?.cost?(d(),m("div",ie,[s.currentActivity(n)?.cost?(d(),m("i",oe)):x("",!0),s.currentActivity(n)?.cost?(d(),m("span",de,o(s.formattedCost(s.currentActivity(n)?.cost,s.currentActivity(n)?.costCurrency)),1)):x("",!0),s.currentActivity(n)?.costNote?(d(),m("span",me,o(s.currentActivity(n)?.costNote),1)):x("",!0)])):x("",!0)])]),_:2},1024)):l.isLoading&&!s.currentActivity(n)?(d(),m("div",ue,[v(f),e[1]||(e[1]=t("span",{class:"text-zinc-400"},"Loading Activity",-1))])):(d(),m("div",fe," No Activities ")),s.nextActivity(n)?(d(),m("span",xe,"Next Activity")):x("",!0),s.nextActivity(n)?(d(),C(u,{key:4,class:"fadeIn fadeIn-1 md:!p-6 !p-3 gap-2 grow rounded-[1.2rem] border border-peach-400 shadow-sm transition-all duration-200 hover:shadow-md cursor-pointer flex-row!"},{default:p(()=>[t("div",ge,[t("span",he,"Day "+o(s.days(n).indexOf(s.nextActivity(n)?.date)+1),1),t("span",pe,o(s.getDay(s.nextActivity(n)?.datetime)),1),t("span",ye,o(s.formatTime(s.nextActivity(n)?.time)),1)]),t("div",ve,[t("div",be,[t("div",_e,[t("i",{class:g(["ph text-xl text-peach-400",s.nextActivity(n)?.iconName])},null,2),t("span",we,o(s.nextActivity(n)?.title),1)])]),t("div",Ae,[e[2]||(e[2]=t("i",{class:"ph ph-map-pin text-peach-400 flex-shrink-0"},null,-1)),t("span",null,o(s.nextActivity(n)?.location.split(",")[0]),1)]),s.nextActivity(n)?.costNote||s.nextActivity(n)?.cost?(d(),m("div",Ce,[s.nextActivity(n)?.cost?(d(),m("i",De)):x("",!0),s.nextActivity(n)?.cost?(d(),m("span",Te,o(s.formattedCost(s.nextActivity(n)?.cost,s.nextActivity(n)?.costCurrency)),1)):x("",!0),s.nextActivity(n)?.costNote?(d(),m("span",ke,o(s.nextActivity(n)?.costNote),1)):x("",!0)])):x("",!0)])]),_:2},1024)):x("",!0)])],8,V)]),_:2},1032,["class","customClass"]))),256)}const Se=z(H,[["render",ze]]),Ie={name:"Card",props:{variant:{type:String,default:"default"},size:{type:String,default:"default"},customClass:{type:String,default:""}},computed:{sizeClass(){switch(this.size){case"asdf":return"";default:return"  "}},backgroundClass(){switch(this.variant){case"transparent":return"bg-transparent";case"subtle":return"bg-zinc-100 dark:bg-zinc-900";case"dotted":return"dotted-bg";default:return"bg-white rounded-4xl"}},borderClass(){return"border-secondary-xs"}}};function Fe(a,e,r,c,l,s){return d(),m("div",{class:g(["card-container",["p-4 md:p-6 flex flex-col gap-2 transition-colors","w-full overflow-hidden rounded-2xl","border-secondary-xs shadow-secondary-sm",s.backgroundClass,r.customClass]])},[P(a.$slots,"default",{},void 0,!0)],2)}const Ne=z(Ie,[["render",Fe],["__scopeId","data-v-1cf50826"]]),Ue=W({name:"ActiveTrips",__name:"index",setup(a,{expose:e}){e();const r=I([]),c=I(!0),l=T(()=>r.value.filter(i=>y(i.date.start,i.date.end)==="Active")),s=T(()=>r.value.filter(i=>y(i.date.start,i.date.end)==="Upcoming")),u=T(()=>[...new Set(l.value.map(i=>i.companionsUids).flat())]),f=async()=>{try{const i=await fetch("/api/v1/active-trips");if(!i.ok)throw console.error(`Failed to fetch trips. Status: ${i.status}`),new Error(`Failed to fetch trips: ${i.statusText}`);return c.value=!1,await i.json()}catch(i){return console.error("Error fetching trips:",i),c.value=!1,null}};function n(i){const h=D=>D<10?"0"+D:D,b=i.getFullYear(),A=h(i.getMonth()+1),_=h(i.getDate()),N=h(i.getHours()),U=h(i.getMinutes()),j=h(i.getSeconds());return i.getTimezoneOffset(),`${b}-${A}-${_}T${N}:${U}:${j}`}function y(i,h){const b=new Date,A=new Date(i),_=new Date(h);if(_.setDate(_.getDate()+1),b<A)return"Upcoming";if(A<=b&&b<_)return"Active";if(_<b)return"Completed"}$(async()=>{r.value=await f()});const w={trips:r,isLoading:c,activeTrips:l,upcomingTrips:s,companions:u,fetchTrips:f,getLocalIsoStringWithOffset:n,checkUpcoming:y,Anchor:O,ActiveTripCard:Se,Spinner:F,AgdayoCard:Ne};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),je={key:0,class:"flex flex-col grow items-center justify-center gap-4"},Me={key:0,class:"flex items-center justify-center w-full h-[32rem]"},Oe={class:"flex flex-col grow items-center justify-center gap-4"},Le={class:"flex flex-col gap-1 items-center justify-center"},Ye={key:1,class:"flex flex-col gap-8 mt-12"},Be={class:"flex flex-nowrap gap-2 md:gap-4"},Ee={class:"flex flex-col items-start justify-between"},Pe={class:"font-bold text-4xl md:text-6xl"},We={class:"flex flex-col items-start justify-between"},$e={class:"font-bold text-4xl md:text-6xl"},He={class:"flex flex-col items-start justify-between"},Ve={class:"font-bold text-4xl md:text-6xl"};function Re(a,e,r,c,l,s){return c.activeTrips.length<=0?(d(),m("div",je,[c.isLoading?(d(),m("div",Me,[v(c.Spinner,{label:"Loading your trips"})])):(d(),C(M,{key:1,name:"fade",appear:""},{default:p(()=>[t("div",Oe,[e[3]||(e[3]=t("i",{class:"ph ph-island text-8xl text-zinc-400"},null,-1)),e[4]||(e[4]=t("span",{class:"font-medium text-zinc-400"},"No Active or Upcoming Trip",-1)),t("div",Le,[v(c.Anchor,{href:"/create-trip",class:"text-xl"},{default:p(()=>e[0]||(e[0]=[k("Start Planning your Trip")])),_:1}),e[1]||(e[1]=t("span",null,"or",-1)),e[2]||(e[2]=t("span",{class:"text-xl"},[k("Use "),t("a",{href:"/ai",class:"p-1 rounded-lg bg-white transition border border-zinc-200 scale-100 active:scale-95 hover:scale-105"},[t("span",{class:"font-medium",style:{"background-image":"linear-gradient(to right, #eea092, #eabf67)",color:"transparent","background-clip":"text"}},"Agdayo AI")]),k(" to help you plan your Trip!")],-1))])])]),_:1}))])):(d(),m("div",Ye,[t("div",Be,[v(c.AgdayoCard,{class:"fadeIn fadeIn-0","custom-class":"flex flex-col items-start justify-between relative"},{default:p(()=>[t("div",Ee,[e[5]||(e[5]=t("span",{class:"font-medium text-normal md:text-lg text-zinc-700"},"Active Trips",-1)),t("span",Pe,o(c.activeTrips.length),1)]),e[6]||(e[6]=t("span",{class:"text-xs text-zinc-400 mt-4"},"With 4 upcoming activities",-1)),e[7]||(e[7]=t("i",{class:"ph ph-airplane-tilt text-zinc-100 absolute -bottom-20 -right-20 text-[16rem] -z-10"},null,-1))]),_:1}),v(c.AgdayoCard,{class:"fadeIn fadeIn-1","custom-class":"flex flex-col items-start justify-between relative"},{default:p(()=>[t("div",We,[e[8]||(e[8]=t("span",{class:"font-medium text-normal md:text-lg text-zinc-700"},"Upcoming Trips",-1)),t("span",$e,o(c.upcomingTrips.length),1)]),e[9]||(e[9]=t("span",{class:"text-xs text-zinc-400 mt-4"},"Planned Adventures",-1)),e[10]||(e[10]=t("i",{class:"ph ph-calendar-dots text-zinc-100 absolute -bottom-20 -right-20 text-[16rem] -z-10"},null,-1))]),_:1}),v(c.AgdayoCard,{class:"fadeIn fadeIn-2 hidden md:flex","custom-class":"flex flex-col items-start justify-between relative"},{default:p(()=>[t("div",He,[e[11]||(e[11]=t("span",{class:"font-medium text-normal md:text-lg text-zinc-700"},"Companions",-1)),t("span",Ve,o(c.companions.length),1)]),e[12]||(e[12]=t("span",{class:"text-xs text-zinc-400 mt-4"},"Currently on active trips",-1)),e[13]||(e[13]=t("i",{class:"ph ph-users text-zinc-100 absolute -bottom-20 -right-20 text-[16rem] -z-10"},null,-1))]),_:1})]),e[14]||(e[14]=t("span",{class:"font-bold text-4xl fadeIn"},"Active Trips",-1)),v(c.ActiveTripCard,{trips:c.activeTrips},null,8,["trips"])]))}const nt=z(Ue,[["render",Re]]);export{nt as default};
