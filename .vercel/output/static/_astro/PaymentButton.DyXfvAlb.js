import{B as u}from"./Button.BgwQzOqK.js";import{_ as d}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{e as i,f as l,w as p,o as f,g as m,t as _}from"./runtime-core.esm-bundler.Db96a2QS.js";const y={__name:"PaymentButton",props:{amount:{type:Number,required:!0},description:{type:String,required:!0},buttonText:{type:String,default:"Pay Now"}},setup(n,{expose:a}){a();const t=n,e=i(!1);async function s(){e.value=!0;try{const o=await fetch("/api/v1/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t.amount,description:t.description,successUrl:"http://localhost:4321/payment-success",userId:"user_123"})});if(!o.ok)throw new Error("Failed to create checkout session.");const c=await o.json();if(c.checkout_url)window.location.href=c.checkout_url;else throw new Error("Checkout URL not found in response.")}catch(o){console.error("Payment Error:",o),alert("An error occurred during payment. Please try again."),e.value=!1}}const r={props:t,isLoading:e,handlePayment:s,ref:i,Button:u};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}};function h(n,a,t,e,s,r){return f(),l(e.Button,{onClick:e.handlePayment,disabled:e.isLoading},{default:p(()=>[m(_(e.isLoading?"Processing...":t.buttonText),1)]),_:1},8,["disabled"])}const k=d(y,[["render",h]]);export{k as P};
