import{T as R}from"./runtime-dom.esm-bundler.CNGa7J2q.js";import{I}from"./Toast.BZml51HT.js";import{_ as q}from"./_plugin-vue_export-helper.DlAUqK2U.js";/* empty css                       */import{A as C}from"./Anchor.fzLUPe0_.js";import{h as A,e as v,i as N,f as z,w as p,o as s,b as n,d as h,c as t,a as u,F as y,j as k,n as a,t as d,g as m}from"./runtime-core.esm-bundler.Db96a2QS.js";const F=600,E=A({__name:"Friends",props:{pendingFriendships:{type:Array,default:[]},acceptedFriendships:{type:Array,default:[]},uid:{type:String,default:""}},emits:["friendAccepted","friendRequestCancelled"],setup(g,{expose:i,emit:l}){i();const r=g,x=v(""),f=v("");let e=null;const o=()=>{e&&clearTimeout(e),e=setTimeout(()=>{f.value=x.value},F)},_=N(()=>f?r.acceptedFriendships.filter(c=>c.user2DisplayName.toLowerCase().includes(f.value.toLowerCase())):r.acceptedFriendships),b=l,w={props:r,searchQuery:x,debouncedSearchQuery:f,get timeoutId(){return e},set timeoutId(c){e=c},DELAY_MS:F,debounceInput:o,filteredAcceptedFriendships:_,emit:b,acceptFriendRequest:async c=>{(await fetch("/api/v1/friendship",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendshipId:c,status:"accepted"})})).ok&&b("friendAccepted")},cancelFriendRequest:async c=>{(await fetch(`/api/v1/friendship?id=${c}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok&&b("friendRequestCancelled")},Input:I,Anchor:C};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),L={class:"flex flex-col gap-4"},U={key:0},D={class:a(["text-xl transition rounded-full flex","bg-none justify-center items-center","bg-zinc-200 aspect-square border-2 border-zinc-300","shadow-secondary-sm","border-secondary-sm","overflow-hidden h-12 w-12"])},P=["src"],S={key:1,class:"ph ph-user"},T={class:"flex flex-col gap-0 grow"},V={key:0,class:"font-semibold"},B={key:1,class:"font-semibold"},Q=["onClick"],Y={class:"flex gap-3 self-start items-center justify-items-start"},M={class:a(["text-xl transition rounded-full flex","bg-none justify-center items-center","bg-zinc-200 aspect-square border-2 border-zinc-300","shadow-secondary-sm","border-secondary-sm","overflow-hidden h-12 w-12"])},O=["src"],J={key:1,class:"ph ph-user"},G={class:"flex flex-col gap-0 grow"},H={key:0,class:"font-semibold"},K={key:1,class:"font-semibold"},W={class:"flex self-end md:self-auto items-center justify-center gap-2"},X={class:"flex gap-3 self-start items-center justify-start"},Z={class:a(["text-xl transition rounded-full flex","bg-none justify-center items-center","bg-zinc-200 aspect-square border-2 border-zinc-300","shadow-secondary-sm","border-secondary-sm","overflow-hidden h-12 w-12"])},$=["src"],ee={key:1,class:"ph ph-user"},se={class:"flex flex-col gap-0 grow"},te={key:0,class:"font-semibold"},ne={key:1,class:"font-semibold"},ie={class:a(["text-xl transition rounded-full flex","bg-none justify-center items-center","bg-zinc-200 aspect-square border-2 border-zinc-300","shadow-secondary-sm","border-secondary-sm","overflow-hidden h-12 w-12"])},re=["src"],oe={key:1,class:"ph ph-user"},de={class:"flex flex-col gap-0 grow"},ae={key:0,class:"font-semibold"},le={key:1,class:"font-semibold"},ce={key:3,class:"flex flex-col items-center justify-center gap-1 text-zinc-500 py-10"};function ue(g,i,l,r,x,f){return s(),z(R,{name:"fade",appear:""},{default:p(()=>[n("div",L,[i[7]||(i[7]=n("div",{class:"text-2xl gap-2 font-bold flex items-center"},[n("i",{class:"ph ph-users"}),n("span",null,"My Friends")],-1)),h(r.Input,{id:"friends-search","prefix-icon":"ph ph-magnifying-glass",placeholder:"Search friends",modelValue:r.searchQuery,"onUpdate:modelValue":i[0]||(i[0]=e=>r.searchQuery=e),onInput:r.debounceInput},null,8,["modelValue"]),l.pendingFriendships.length>0?(s(),t("span",U,"Friend Requests")):u("",!0),l.pendingFriendships.length>0?(s(!0),t(y,{key:1},k(l.pendingFriendships,(e,o)=>(s(),t(y,null,[e.user1Uid!=l.uid?(s(),t("div",{key:`${e.user1Uid}-${o}`,class:a(["fadeIn p-3 rounded-3xl gap-3 shadow-secondary-md border-secondary-xs flex flex-row items-center justify-start",`fadeIn-${o}`])},[n("div",D,[e.user1PhotoURL?(s(),t("img",{key:0,src:e.user1PhotoURL,alt:""},null,8,P)):(s(),t("i",S))]),n("div",T,[e.user1DisplayName?(s(),t("span",V,d(e.user1DisplayName),1)):e.user1Email?(s(),t("span",B,d(e.user1Email),1)):u("",!0)]),n("button",{onClick:_=>r.acceptFriendRequest(e.id),class:"inline-flex items-center gap-1 px-4 py-2 rounded-full text-sm font-semibold bg-peach-500 text-white hover:bg-peach-600 transition-colors shadow-md shadow-peach-300 active:scale-95"},i[1]||(i[1]=[n("i",{class:"ph ph-hand-waving text-base"},null,-1),m(" Accept Friend Request ")]),8,Q)],2)):(s(),t("div",{key:1,class:a(["fadeIn p-3 rounded-3xl gap-3 shadow-secondary-md border-secondary-xs flex flex-col md:flex-row items-center justify-start md:justify-between",`fadeIn-${o}`])},[n("div",Y,[n("div",M,[e.user2PhotoURL?(s(),t("img",{key:0,src:e.user2PhotoURL,alt:""},null,8,O)):(s(),t("i",J))]),n("div",G,[e.user2DisplayName?(s(),t("span",H,d(e.user2DisplayName),1)):e.user2Email?(s(),t("span",K,d(e.user2Email),1)):u("",!0)])]),n("div",W,[h(r.Anchor,{onClick:_=>r.cancelFriendRequest(e.id),href:"javascript:void(0)"},{default:p(()=>i[2]||(i[2]=[m("Cancel")])),_:2},1032,["onClick"]),i[3]||(i[3]=n("span",{class:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-semibold bg-zinc-100 text-zinc-500 border border-zinc-200"},[n("i",{class:"ph ph-hourglass-simple text-base"}),m(" Request Sent ")],-1))])],2))],64))),256)):u("",!0),i[8]||(i[8]=n("span",null,"Your Friends",-1)),r.filteredAcceptedFriendships.length>0?(s(!0),t(y,{key:2},k(r.filteredAcceptedFriendships,(e,o)=>(s(),t(y,null,[e.user1Uid!=l.uid?(s(),t("div",{key:0,class:a(["fadeIn p-3 rounded-3xl gap-3 shadow-secondary-md border-secondary-xs flex flex-col md:flex-row items-center justify-start md:justify-between",`fadeIn-${o}`])},[n("div",X,[n("div",Z,[e.user1PhotoURL?(s(),t("img",{key:0,src:e.user1PhotoURL,alt:""},null,8,$)):(s(),t("i",ee))]),n("div",se,[e.user1DisplayName?(s(),t("span",te,d(e.user1DisplayName),1)):e.user1Email?(s(),t("span",ne,d(e.user1Email),1)):u("",!0)])]),h(r.Anchor,{href:""},{default:p(()=>i[4]||(i[4]=[m("View Profile")])),_:1})],2)):(s(),t("div",{key:1,class:a(["fadeIn p-3 rounded-3xl gap-3 shadow-secondary-md border-secondary-xs flex flex-col md:flex-row items-center justify-start md:justify-between",`fadeIn-${o}`])},[n("div",ie,[e.user2PhotoURL?(s(),t("img",{key:0,src:e.user2PhotoURL,alt:""},null,8,re)):(s(),t("i",oe))]),n("div",de,[e.user2DisplayName?(s(),t("span",ae,d(e.user2DisplayName),1)):e.user2Email?(s(),t("span",le,d(e.user2Email),1)):u("",!0)]),h(r.Anchor,{href:""},{default:p(()=>i[5]||(i[5]=[m("View Profile")])),_:1})],2))],64))),256)):(s(),t("div",ce,i[6]||(i[6]=[n("i",{class:"ph ph-users text-3xl"},null,-1),n("span",null,"You have no friends",-1)])))])]),_:1})}const ge=q(E,[["render",ue]]);export{ge as F};
